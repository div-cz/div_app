(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)})(function(e){e.extend(e.summernote.plugins,{emoji:function(i){var t=this,n=27,o=9,a=e.summernote.ui,s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=16*Math.random()|0,t="x"==e?i:3&i|8;return t.toString(16)});Array.prototype.filter||(Array.prototype.filter=function(e){var i=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var t=[],n=arguments[1],o=0;o<i;o++)if(o in this){var a=this[o];e.call(n,a,o,this)&&t.push(a)}return t});var r=function(){var a=e("body");a.on("keydown",function(e){e.keyCode!==n&&e.keyCode!==o||t.$panel.hide()}),a.on("mouseup",function(i){i=i.originalEvent||i;var n=i.target||window;e(n).hasClass("emoji-picker")||e(n).hasClass("emoji-menu-tab")||t.$panel.hide()}),a.on("click","."+s+" .emoji-menu-tab",function(i){i.stopPropagation(),i.preventDefault();var t=0,n=e(this).attr("class").split(" ");n=n[1].split("-"),3!==n.length&&(n=n[0]+"-"+n[1],e("."+s+" .emoji-menu-tabs td").each(function(i){var o=e(this).find("a"),a=o.attr("class").split(" ");a=a[1].split("-"),a=a[0]+"-"+a[1],n===a?(o.attr("class","emoji-menu-tab "+a+"-selected"),t=i):o.attr("class","emoji-menu-tab "+a)}),m(t))}),e(document).on("click","."+s+" .emoji-items a",function(){var n=e(".label",e(this)).text();if("unicode"===document.emojiType)i.invoke("editor.insertText",u(n));else{var o=e(l(t.icons[n]));o[0].attachEvent&&o[0].attachEvent("onresizestart",function(e){e.returnValue=!1},!1),i.invoke("editor.insertNode",o[0])}ConfigStorage.get("emojis_recent",function(e){e=e||Config.defaultRecentEmojis||[];var i=e.indexOf(n);if(!i)return!1;-1!==i&&e.splice(i,1),e.unshift(n),e.length>42&&(e=e.slice(42)),ConfigStorage.set({emojis_recent:e})})})},c=function(){var e,i,n,o,a,s,r,c,m;for(n=void 0,a=void 0,void 0,o={},r={},s=void 0,i=void 0,c=void 0,e=void 0,m=void 0,a=0;a<Config.EmojiCategories.length;){for(m=Config.EmojiCategorySpritesheetDimens[a][1],n=0;n<Config.EmojiCategories[a].length;)i=Config.Emoji[Config.EmojiCategories[a][n]],s=i[1][0],c=Math.floor(n/m),e=n%m,o[":"+s+":"]=[a,c,e,":"+s+":"],r[s]=i[0],n++;a++}t.icons=o,t.reverseIcons=r,Config.rx_codes||Config.init_unified()},m=function(i){var n=e("."+s+" .emoji-items");n.html(""),i>0?e.each(t.icons,function(e,o){t.icons.hasOwnProperty(e)&&o[0]===i-1&&n.append('<a href="javascript:void(0)" title="'+Config.htmlEntities(e)+'">'+l(o,!0)+'<span class="label">'+Config.htmlEntities(e)+"</span></a>")}):ConfigStorage.get("emojis_recent",function(e){var i,o;for(e=e||Config.defaultRecentEmojis||[],o=0;o<e.length;o++)i=e[o],t.icons[i]&&n.append('<a href="javascript:void(0)" title="'+Config.htmlEntities(i)+'">'+l(t.icons[i],!0)+'<span class="label">'+Config.htmlEntities(i)+"</span></a>")})},l=function(e){var i=e[0],t=e[1],n=e[2],o=e[3],a=document.emojiSource+"/emoji_spritesheet_!.png",s=document.emojiSource+"/blank.gif",r=25,c=-r*n,m=-r*t,l=Config.EmojiCategorySpritesheetDimens[i][1]*r,u=Config.EmojiCategorySpritesheetDimens[i][0]*r,d="display:inline-block;";return d+="width:"+r+"px;",d+="height:"+r+"px;",d+="background:url('"+a.replace("!",i)+"') "+c+"px "+m+"px no-repeat;",d+="background-size:"+l+"px "+u+"px;",'<img src="'+s+'" class="img" style="'+d+'" alt="'+Config.htmlEntities(o)+'">'},u=function(e){return e.replace(Config.rx_colons,function(e){var i;return i=Config.mapcolon[e],i||""})};i.memo("button.emoji",function(){void 0===document.emojiButton&&(document.emojiButton="fa fa-smile-o");var e=a.button({contents:'<i class="'+document.emojiButton+' emoji-picker-container emoji-picker"></i>',click:function(){void 0===document.emojiSource&&(document.emojiSource=""),void 0===document.emojiType&&(document.emojiType="");var e=t.$panel.width();e>t.$panel.position().left&&t.$panel.css({left:"0",top:"100%"}),t.$panel.show()}});return t.emoji=e.render(),t.emoji}),this.events={"summernote.init":function(e,i){r()}},this.initialize=function(){this.$panel=e('<div class="emoji-menu '+s+'">\n    <div class="emoji-items-wrap1">\n        <table class="emoji-menu-tabs">\n            <tbody>\n            <tr>\n                <td><a class="emoji-menu-tab icon-recent-selected"></a></td>\n                <td><a class="emoji-menu-tab icon-smile"></a></td>\n                <td><a class="emoji-menu-tab icon-flower"></a></td>\n                <td><a class="emoji-menu-tab icon-bell"></a></td>\n                <td><a class="emoji-menu-tab icon-car"></a></td>\n                <td><a class="emoji-menu-tab icon-grid"></a></td>\n            </tr>\n            </tbody>\n        </table>\n        <div class="emoji-items-wrap mobile_scrollable_wrap">\n            <div class="emoji-items"></div>\n        </div>\n    </div>\n</div>').hide(),this.$panel.appendTo(this.emoji.parent()),c(),m(0)},this.destroy=function(){this.$panel.remove(),this.$panel=null}}})});