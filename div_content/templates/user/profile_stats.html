{% extends "user/base.html" %}

{% load i18n %}

{% block title %}Profil  {{ profile_user.username }} {% endblock title %}

{% block h1 %}{{ profile_user.username }}{% endblock h1 %}
{% block text_muted %} na DIV.cz{% endblock text_muted %}

{% block meta %}

<style>
    .nav-tabs-item a.active,
    .tab.active {
        background-color: #607d8b;
    }

    .nav-tabs-link {
        color: #607d8b;
    }

    .nav-tabs-link:is(.dark *) {
        color: #607d8b;
    }

    .stats-container h2 {
        font-size: 1.2em;
        margin-bottom: 10px;
    }

    .stats-container .category, 
    .stats-container .origin {
        color: #b22222; 
    }

    .stats-container .tooltip {
        font-size: 0.8em;
        background-color: black;
        color: white;
        border-radius: 50%;
        padding: 0 5px;
        cursor: pointer;
    }

    .stat-item {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
    }

    .stat-item p {
        color: #0d0c0f;
        padding-right: .25rem; /* 4px */
        font-size: small;
    }

    .label-stat {
        width: 115px;
    }

    .bar-container {
        flex-grow: 1;
        background-color: #d3d3d3; 
        border-radius: 5px;
        margin-left: 10px;
        margin-right: 20px;
    }

    .bar-movie {
        height: 20px;
        background-color: #A52B21;
        border-radius: 5px;
    }

    .bar-book {
        height: 20px;
        background-color: #61872B;
        border-radius: 5px;
    }

    .bar-game {
        height: 20px;
        background-color: #00A0E3;
        border-radius: 5px;
    }

    .tab-content-item h3 {
        text-align: center;
        font-weight: 700;
        margin-bottom: 1.25rem; /* 20px */
    }

</style>

{% endblock %}

{% block content %}

<div style="margin-top: 1.25rem;">
    <!-- Sekce záložek pro filmy, knihy, hry, statistiky -->
    <ul class="tab-profil">
        <li class="tab {% if active_tab == 'filmy' %}active{% endif %}">
            <i class="fa-solid fa-film"></i>
            <a class="movies" href="{% url 'profile_movies_section' profile_user.id %}">Filmy</a>
        </li>
        <li class="tab {% if active_tab == 'serialy' %}active{% endif %}">
            <i class="fa-solid fa-video"></i>
            <a class="movies" href="{% url 'profile_series_section' profile_user.id %}">Seriály</a>
        </li>
        <li class="tab {% if active_tab == 'knihy' %}active{% endif %}">
            <i class="fa-solid fa-book"></i>
            <a class="books" href="{% url 'profile_books_section' profile_user.id %}">Knihy</a>
        </li>
        <li class="tab {% if active_tab == 'hry' %}active{% endif %}">
            <i class="fa-solid fa-gamepad"></i>
            <a class="games" href="{% url 'profile_games_section' profile_user.id %}">Hry</a>
        </li>
        <li class="tab {% if active_tab == 'statistiky' %}active{% endif %}">
            <i class="fas fa-star"></i>
            <a class="stats" href="{% url 'profile_stats_section' profile_user.id %}">Statistiky</a>
        </li>
        <li class="tab {% if active_tab == 'vitrina' %}active{% endif %}">
            <i class="fa-solid fa-trophy"></i> 
            <a class="badges" href="{% url 'profile_show_case' profile_user.id %}">Vitrína</a>
        </li>
        <li class="tab {% if active_tab == 'obchod' %}active{% endif %}">
            <i class="fa-solid fa-cart-shopping"></i>
            <a class="shop" href="{% url 'profile_eshop_section' profile_user.id %}">Obchod</a>
        </li>
        <li class="tab {% if active_tab == 'komunita' %}active{% endif %}" >
            <i class="fas fa-user"></i>
            <a class="community" href="{% url 'profile_community_section' profile_user.id %}">Má komunita</a>
        </li>

        <!-- Indikátor pozadí -->
        <div class="background"></div>

    </ul>
    
    <!-- Podkategorie záložek (hodnocení, oblíbené atd.) -->
    <div class="row" style="margin-top: 1.25rem;">

        <div class="tab-content">
            <!-- Úvodní obsah -->
            <div id="intro-content" class="tab-show active">
                <div class="tab-content-item">
                    <h3>MOJE FILMOVÉ STATISTIKY</h3>
                    <div class="flex sm:flex-wrap">
                        <!-- NEJ ŽÁNRY-->
                        <div class="stats-container">
                            <h3 class="card-title after-h3">Nej žánry</h3>
                            {% if genre_percentages %}
                                {% for genre_stat in genre_percentages %}
                                    <div class="stat-item">
                                        <span class="label-stat">{{ genre_stat.genre }}</span>
                                        <div class="bar-container flex justify-between flex-row-reverse">
                                            <p>{{ genre_stat.percentage|floatformat:0 }}%</p>
                                            <div class="bar-movie" style="width: {{ genre_stat.percentage|floatformat:0 }}%;"></div>
                                        </div>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <div class="stat-item">
                                    <span>Žádná hodnocení</span>
                                    <!-- <div class="bar-container flex justify-between flex-row-reverse">
                                        <p>0%</p>
                                        <div class="bar-movie" style="width: 0%;"></div>
                                    </div> -->
                                </div>
                            {% endif %}
                        </div>

                        <!-- NEJ ZEMĚ-->
                        <div class="stats-container lg:pl-5 w-full">
                            <h3 class="card-title after-h3">Nej země</h3>
                            {% if country_percentages %}
                                {% for country_stat in country_percentages %}
                                    <div class="stat-item">
                                        <span class="label-stat">{{ country_stat.country }}</span>
                                        <div class="bar-container flex justify-between flex-row-reverse">
                                            <p>{{ country_stat.percentage|floatformat:0 }}%</p>
                                            <div class="bar-movie" style="width: {{ country_stat.percentage|floatformat:0 }}%;"></div>
                                        </div>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <div class="stat-item">
                                    <span>Žádné hodnocené filmy podle zemí</span>
                                    <!-- <div class="bar-container flex justify-between flex-row-reverse">
                                        <p>0%</p>
                                        <div class="bar-movie" style="width: 0%;"></div>
                                    </div> -->
                                </div>
                            {% endif %}
                        </div>

                    </div>
                </div>

                <div class="tab-content-item">
                    <h3>MOJE KNIŽNÍ STATISTIKY</h3>
                    <div class="flex sm:flex-wrap">
                        <!-- NEJ ŽÁNRY -->
                        <div class="stats-container w-full lg:stats-container">
                            <h3 class="card-title after-h3">Nej žánry</h3>
                            {% if book_genre_percentages %}
                                {% for genre_stat in book_genre_percentages %}
                                <div class="stat-item lg:mr-5">
                                    <span class="label-stat">{{ genre_stat.genre }}</span>
                                    <div class="bar-container flex justify-between flex-row-reverse">
                                        <p>{{ genre_stat.percentage|floatformat:0 }}%</p>
                                        <div class="bar-book" style="width: {{ genre_stat.percentage|floatformat:0 }}%;"></div>
                                    </div>
                                </div>
                                {% endfor %}
                            {% else %}
                            <div class="stat-item">
                                <span>Žádné hodnocené žánry</span>
                                <!-- <div class="bar-container flex justify-between flex-row-reverse">
                                    <p>0%</p>
                                    <div class="bar-book" style="width: 0%;"></div>
                                </div> -->
                            </div>
                            {% endif %}
                        </div>
                        
                        <!-- NEJ ZEMĚ -->
                        <div class="stats-container lg:pl-5 w-full">
                            <h3 class="card-title after-h3">Nej země</h3>
                            {% if book_country_percentages %}
                                {% for country_stat in book_country_percentages %}
                                    <div class="stat-item">
                                        <span class="label-stat">{{ country_stat.country }}</span>
                                        <div class="bar-container flex justify-between flex-row-reverse">
                                            <p>{{ country_stat.percentage|floatformat:0 }}%</p>
                                            <div class="bar-book" style="width: {{ country_stat.percentage|floatformat:0 }}%;"></div>
                                        </div>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <div class="stat-item">
                                    <span>Žádné hodnocené knihy podle zemí</span>
                                    <!-- <div class="bar-container flex justify-between flex-row-reverse">
                                        <p>0%</p>
                                        <div class="bar-book" style="width: 0%;"></div>
                                    </div> -->
                                </div>
                            {% endif %}
                        </div>

                    </div>
                </div>

                <div class="tab-content-item">
                    <h3>MOJE HERNÍ STATISTIKY</h3>
                    <div class="flex sm:flex-wrap">
                        <!-- NEJ ŽÁNRY -->
                        <div class="stats-container w-full lg:stats-container">
                            <h3 class="card-title after-h3">Nej žánry</h3>

                            <div class="stat-item lg:mr-5">
                                <span class="label-stat">RPG</span>
                                <div class="bar-container flex justify-between flex-row-reverse">
                                    <p>75%</p>
                                    <div class="bar-game" style="width: 75%;"></div>
                                </div>
                            </div>
                            <div class="stat-item lg:mr-5">
                                <span class="label-stat">Logické</span>
                                <div class="bar-container flex justify-between flex-row-reverse">
                                    <p>60%</p>
                                    <div class="bar-game" style="width: 60%;"></div>
                                </div>
                            </div>
                            <div class="stat-item lg:mr-5">
                                <span class="label-stat">Strategie</span>
                                <div class="bar-container flex justify-between flex-row-reverse">
                                    <p>50%</p>
                                    <div class="bar-game" style="width: 50%;"></div>
                                </div>
                            </div>
                            <div class="stat-item lg:mr-5">
                                <span class="label-stat">Bojové</span>
                                <div class="bar-container flex justify-between flex-row-reverse">
                                    <p>40%</p>
                                    <div class="bar-game" style="width: 40%;"></div>
                                </div>
                            </div>
                            <div class="stat-item lg:mr-5">
                                <span class="label-stat">Sportovní</span>
                                <div class="bar-container flex justify-between flex-row-reverse">
                                    <p>32%</p>
                                    <div class="bar-game" style="width: 32%;"></div>
                                </div>
                            </div>
                        </div>

                        <!-- NEJ VYDAVATELÉ -->
                        <div class="stats-container lg:pl-5 w-full">
                            <h3 class="card-title after-h3">Nej vydavatelé</h3>
                            <div class="stat-item ">
                                <span class="label-stat">Sony</span>
                                <div class="bar-container flex justify-between flex-row-reverse">
                                    <p>75%</p>
                                    <div class="bar-game" style="width: 75%;"></div>
                                </div>
                            </div>
                            <div class="stat-item ">
                                <span class="label-stat">Rockstar</span>
                                <div class="bar-container flex justify-between flex-row-reverse">
                                    <p>60%</p>
                                    <div class="bar-game" style="width: 60%;"></div>
                                </div>
                            </div>
                            <div class="stat-item ">
                                <span class="label-stat">Mindok</span>
                                <div class="bar-container flex justify-between flex-row-reverse">
                                    <p>50%</p>
                                    <div class="bar-game" style="width: 50%;"></div>
                                </div>
                            </div>
                            <div class="stat-item ">
                                <span class="label-stat">Electronic</span>
                                <div class="bar-container flex justify-between flex-row-reverse">
                                    <p>40%</p>
                                    <div class="bar-game" style="width: 40%;"></div>
                                </div>
                            </div>
                            <div class="stat-item ">
                                <span class="label-stat">Albi</span>
                                <div class="bar-container flex justify-between flex-row-reverse">
                                    <p>32%</p>
                                    <div class="bar-game" style="width: 32%;"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

{% endblock content %}