{% extends "books/base.html" %}
{% load i18n %}
{% load ratings %}
{% load static %}

{% block title %} | DIV.cz{% endblock %}

{% block meta %}
    <style>
        .rating {
            position: relative;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-top: 0;
            margin-right: 0;
            padding: 0;
            box-shadow: 0px 8px 16px rgb(147 147 147);
        }

        .rating::before {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 44px;
            height: 44px;
            background: #444444;
            border-radius: 50%;
            z-index: 2;
            margin: 0;
        }

        .rating::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 50px;
            height: 50px;
            background: conic-gradient(
                var(--gradient-color, #0a0) 0%,
                var(--gradient-color, #0a0) var(--gradient-value, 50%),
                #777777 var(--gradient-value, 50%)
            );
            border-radius: 50%;
            z-index: 1;
            margin: 0;
        }

        .rating-inner {
            position: relative;
            z-index: 3;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            /* margin-top: 10px;
            margin-right: -10px; */
        }

        .rating-inner span {
            font-size: 10px;
            margin-left: 2px;
            color: #ffd700;
        }

        .rating:is(.dark *) {
            box-shadow: none;
        }

        .title-rating {
            display: flex; 
            justify-content: end; 
            width: 100%; 
            margin-top: -50px;
        }

    </style>
{% endblock %}

{% block content %}
        
<div class="container">
    <h2>Seznam knih - {{ genre.genrenamecz }}</h2>
    <div class="row">
        <!-- LEVÁ STRANA -->
        <div class="left-side">
            <!-- Seznam seriálů -->
            <div class="genre-list">
                {% for book in book_list_15 %} 
                    <div class="book-card">
                        <a href="/kniha/{{ book.url }}" style="width: 130px;">
                            {% if book.img == "noimg.png" %}
                                <!-- Pokud je book.img "noimg.png", zobraz výchozí obrázek -->
                                <img src="/static/img/book/book.png" alt="Kniha {{ book.titlecz|default:book.title }}">
                                {% elif book.img == "GoogleID" %}
                                <!-- Pokud je book.img "GoogleID", zobraz náhled z Google Books -->
                                <img src="https://books.google.com/books/content?id={{ book.googleid }}&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api" alt="{{ book.titlecz|default:book.title }}">
                                {% else %}
                                <!-- Jinak zobraz vlastní nahraný obrázek -->
                                <img src="https://media.div.cz/knihy/{{ book.img }}" alt="{{ book.titlecz|default:book.title }}">
                            {% endif %}   
                        </a>

                        <!-- hodnocení -->
                        <div style="display: flex; width: 50px;">
                            <div class="rating" data-rating="{{ book.average_rating }}">
                                <div class="rating-inner">
                                    {{ book.average_rating }}%
                                </div>
                            </div>
                        </div>
                        
                        <p class="card-text">{{ book.description|default_if_none:""|safe|truncatewords:40 }}</p>
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- PRAVÁ STRANA -->
        <div class="right-side">
            <!-- ŽÁNRY -->
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title after-h3">&#127917; Žánry</h3>
                    <div>
                    <a href="/knihy/biografie-a-autobiografie">Biografie a autobiografie</a> |
                    <a href="/knihy/cestopisy">Cestopisy</a> |
                    <a href="/knihy/krimi">Detektivní</a> |
                    <a href="/knihy/dobrodruzne">Dobrodružné</a> |

                    <a href="/knihy/detske">Dětské</a> |
                    <a href="/knihy/eroticke">Erotické</a> |
                    <a href="/knihy/fantasy">Fantasy</a> | 
                    <a href="/knihy/historicky">Historie</a> | 
                    <a href="/knihy/horor">Horor</a> |
                    <a href="/knihy/humor-a-zabava">Humorné</a> |
                    <a href="/knihy/komiksy-a-graficke-romany">Komiks</a> |
                    <a href="/knihy/literatura-faktu">Literatura faktu</a> |

                    <a href="/knihy/odborna">Odborná</a> |
                    <a href="/knihy/poezie">Poezie</a> |
                    <a href="/knihy/pohadky">Pohádky</a> |
                    <a href="/knihy/popularne-naucne">Populárně-naučné</a> |
                    <a href="/knihy/povidky">Povídky</a> |
                    <a href="/knihy/pro-mladez">Pro mládež</a> |

                    <a href="/knihy/romanticky">Romantický</a> |

                    <a href="/knihy/sci-fi">Sci-fi</a> |
                    <a href="/knihy/sportovni">Sportovní</a> |
                    <a href="/knihy/thriller">Thriller</a> |
                    <a href="/knihy/umeni-a-fotografie">Umění</a> |
                    <a href="/knihy/valecne">Válečné</a> |
                    <a href="/knihy/western">Western</a> |
                    <a href="/knihy/young-adult">Young adult</a>
                </div>
                </div>
            </div>

            <!-- ROKY -->
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title after-h3">&#128467;&#65039; Roky</h3>
                    <div>
                        <a href="/serialy/2024">2024</a> |
                        <a href="/serialy/2023">2023</a> |
                        <a href="/serialy/2022">2022</a> |
                        <a href="/serialy/2021">2021</a> |
                        <a href="/serialy/2020">2020</a> |
                        <a href="/serialy/2019">2019</a> |
                        <a href="/serialy/2018">2018</a> |
                        <a href="/serialy/2017">2017</a> |
                        <a href="/serialy/2016">2016</a> |
                        <a href="/serialy/2015">2015</a> |
                        <a href="/serialy/2014">2014</a> |
                        <a href="/serialy/2013">2013</a> |
                        <a href="/serialy/2012">2012</a> |
                        <a href="/serialy/2011">2011</a> |
                        <a href="/serialy/2010">2010</a> |
                        <a href="/serialy/2009">2009</a> |
                        <a href="/serialy/2008">2008</a> |
                        <a href="/serialy/2007">2007</a> |
                        <a href="/serialy/2006">2006</a> |
                        <a href="/serialy/2005">2005</a> |
                        <a href="/serialy/2004">2004</a> |
                        <a href="/serialy/2003">2003</a> |
                        <a href="/serialy/2002">2002</a> |
                        <a href="/serialy/2001">2001</a> |
                        <a href="/serialy/2000">2000</a> |
                        <a href="/serialy/1999">1999</a>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

{% endblock %}