source divenv/bin/activate
divdb = projekt
div = aplikace

git fetch (download)
git checkout master (main)
git merge origin/master
git switch -c name_module
	DEVELOP (git branch = actuall version)
git add .
git commit -m "Describe"
git push origin name_module

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

09/23
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

=== === ==

UWSGI:
/var/www/div_app/uwsgi.ini
sudo nano /etc/uwsgi/apps-available/div.ini  |||  cat /etc/uwsgi/apps-available/div.ini 
/etc/uwsgi/apps-enabled/  
sudo uwsgi --ini /etc/uwsgi/apps-available/div.ini --logto /var/log/uwsgi/debug.log

sudo systemctl restart uwsgi
sudo uwsgi --reload /var/run/uwsgi/app/div/pid

/etc/nginx/sites-available/default
/etc/nginx/nginx.conf
/etc/nginx/conf.d

ls -l /etc/nginx/sites-enabled/
sudo grep -r "listen 80 default_server" /etc/nginx/
(hledani v adresari)

otestovani komunikace mezi Nginx a uWSGI
curl --unix-socket /var/www/div_app/div.sock http://localhost/


sudo nginx -t

sudo systemctl restart uwsgi
sudo systemctl restart nginx
sudo systemctl restart vsftpd


sudo tail -f /var/log/nginx/error.log
tail -n 50 /var/log/debug.log
tail -n 50 /var/log/auth.log
sudo journalctl -xe

sudo tail -n 50 /var/log/uwsgi/app/div.log
tail -n 50 /var/log/uwsgi/debug.log
Systémové logy
tail -n 50 /var/log/syslog

        access_log Faccess.log;
        error_log /var/log/nginx/error.log;


sudo systemctl status nginx
sudo systemctl status uwsgi

python manage.py runserver
python manage.py collectstatic

python3 manage.py showmigrations
python3 manage.py makemigrations
python3 manage.py migrate
python3 manage.py dbshell

(fake_migrations): python3 manage.py migrate div_content 0035_remove_and_more --fake


python3 manage.py shell (ctrl+D = end / exit())
from divdb.models import Film
print(Film._meta.fields)  # vypíše všechna pole modelu Film
print(Film.objects.all())  # vypíše všechny dostupné filmy


divdb
----db.sqlite3
----div----
	----media----
	----static---
----divdb--
	----asgi.py
	----__init__.py
	----__pycache__
	----settings.py
	----urls.py
	----wsgi.py
----manage.py


/var/www/div_app/models.py (DJANGO view)
/var/www/div_app/div_content/models.py
/var/www/div_app/div_content/views.py
     /var/www/div_app/div_content/views/filmy.py
/var/www/div_app/div_config/settings.py
/var/www/div_app/div_config/urls.py

/var/www/div_app/div_content/templates/filmy/movie_detail.html
/var/www/div_app/div_content/templates/filmy/filmy_list.html


=== NEW VIEWS ===
sudo nano 
0) source /var/www/div_app/div_env/bin/activate
1) /var/www/div_app/div_content/templates/clanky/clanek_detail.html
2) /var/www/div_app/div_content/views.py
3) /div_config/urls.py > clanek_detail

sudo systemctl restart uwsgi


=== 502 error ===
sudo cat /var/log/uwsgi/app/div.log
memory: free -m 
nebo "htop"

=== ALLAUTH ===
cp /var/www/div_app/div_env/lib/python3.11/site-packages/allauth/templates/account/login.html /var/www/div_app/div_content/templates/registration/

Translate:
/var/www/div_app/div_env/lib/python3.11/site-packages/django/contrib/auth/locale/
/var/www/div_app/div_env/lib/python3.11/site-packages/allauth/locale/cs/LC_MESSAGES$




sudo chown martin:martin profile.html
sudo chmod 664 /var/www/div_app/div_content/templates/user/profile.html

remove cache python
find . -name "*.pyc" -exec rm -f {} \;
