{% extends "user/base.html" %}

{% load i18n %}

{% block title %}Profil  {{ profile_user.username }} {% endblock title %}

{% block h1 %}{{ profile_user.username }}{% endblock h1 %}
{% block text_muted %} na DIV.cz {% endblock text_muted %}

{% block content %}

<div style="margin-top: 1.25rem;">
    <!-- Sekce záložek pro filmy, knihy, hry, statistiky -->
    <ul class="tab-profil">
        <li class="tab">
            <span>&#127902;</span>
            <a class="movies" href="{% url 'profile_movies_section' profile_user.id %}">Filmy</a>
        </li>
        <li class="tab">
            <span>&#128250;</ispan>
            <a class="movies" href="{% url 'profile_series_section' profile_user.id %}">Seriály</a>
        </li>
        <li class="tab">
            <span>&#128214;</span>
            <a class="books" href="{% url 'profile_books_section' profile_user.id %}">Knihy</a>
        </li>
        <li class="tab">
            <span>&#127918;</span>
            <a class="games" href="{% url 'profile_games_section' profile_user.id %}">Hry</a>
        </li>
        <li class="tab">
            <span>&#11088;</span>
            <a class="stats" href="{% url 'profile_stats_section' profile_user.id %}">Statistiky</a>
        </li>
        <li class="tab">
            <span>&#127942;</span> 
            <a class="badges" href="{% url 'profile_show_case' profile_user.id %}">Vitrína</a>
        </li>
        <li class="tab">
            <span>&#128717;</span>
            <a class="shop" href="{% url 'profile_eshop_section' profile_user.id %}">Obchod</a>
        </li>
        <li class="tab">
            <span>&#128101;</span>
            <a class="community" href="{% url 'profile_community_section' profile_user.id %}">Má komunita</a>
        </li>

        <!-- Indikátor pozadí -->
        <div class="background"></div>

    </ul>
    
    <!-- Podkategorie záložek (hodnocení, oblíbené atd.) -->
    <div class="row" style="margin-top: 1.25rem;">
        <div class="tab-content">
            <!-- Tab Uživatelé -->
            <!-- <div id="uzivatele" style="display: flex;" class="tab-show flex flex-wrap active {% if category == 'uzivatele' %}active{% endif %}">
                <div class="w-50 sm:w-full">
                    <h3>Oblíbení uživatelé</h3>
                    {% if favorite_users %}
                    {% for profile in favorite_users %}
                    <ul>
                        <li><a href="{% url 'myuser_detail' profile.user.id %}">{{ profile.user }}</a></li>
                    </ul>
                    {% endfor %}
                    {% endif %}
                </div>

                <div class="w-50 sm:w-full sm:mt-5">
                    <h3>Mají mě v oblíbených</h3>
                    {% if im_favorite_user %}
                    {% for profile in im_favorite_user %}
                    <ul>
                        <li><a href="{% url 'myuser_detail' profile.user.id %}">{{ profile.user }}</a></li>                    
                    </ul>
                    {% endfor %}
                    {% endif %}
                </div>
            </div> -->

        </div>
    </div>
</div>

<!-- KARTY -->
<script>
    function updateGroupSelector(active) {
        const parent = document.querySelector('.tab-profil');
        const background = parent.querySelector('.background');

        // Najdeme pozici aktivní karty
        const activeRect = active.getBoundingClientRect();
        const parentRect = parent.getBoundingClientRect();

        // Vypočítáme relativní pozici a šířku
        const left = activeRect.left - parentRect.left;
        const width = activeRect.width;

        // Nastavíme nové vlastnosti pozadí
        background.style.transform = `translateX(${left}px)`;
        background.style.width = `${width}px`;

        // Aktualizujeme aktivní kartu
        parent.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
        active.classList.add('active');
    }

    // Inicializace při načtení stránky
    window.addEventListener('DOMContentLoaded', () => {
        const initialTab = document.querySelector('.tab.active');
        if (initialTab) {
            updateGroupSelector(initialTab);
        }
    });
</script>

{% endblock content %}