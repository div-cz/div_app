<!DOCTYPE html>
<html lang="cs">
    
    <head>

        {% include "inc/head.html" %}

        <title>DIV.cz | Databáze filmů, her a knih DIV</title>

        <link href="/static/css/index.css" rel="stylesheet">
        <link href="/static/css/navbar_other.css" rel="stylesheet">

        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick.css"/>
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick-theme.css"/>
        <script src="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick.min.js"></script>

        {% include "inc/google.html" %}

        <meta name="description" content="Objevujte a hodnoťte knihy, hry i filmy na DIV.cz. Připojte se k naší komunitě a získejte přístup k obsahu, recenzím a hodnocením.">
        
        <!-- Open Graph Meta Tags -->
        <meta property="og:title" content="DIV.cz | Databáze filmů, her a knih DIV">
        <meta property="og:description" content="Objevujte a hodnoťte knihy, hry i filmy na DIV.cz. Připojte se k naší komunitě a získejte přístup k obsahu, recenzím a hodnocením.">
        <meta property="og:image" content="https://div.cz/img/movie/filmovy-div.webp">
        <meta property="og:url" content="https://div.cz">
        <meta property="og:type" content="website">
        <meta property="og:site_name" content="DIV.cz">
        
        <!-- Twitter Meta Tags -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="DIV.cz | Databáze filmů, her a knih DIV">
        <meta name="twitter:description" content="Objevujte a hodnoťte filmy, hry a knihy na DIV.cz. Připojte se k naší komunitě a získejte přístup k obsahu, recenzím a hodnocením.">
        <meta name="twitter:image" content="https://div.cz/img/movie/filmovy-div.webp">
        <meta name="twitter:site" content="@DIV_cz">
        <meta name="twitter:creator" content="@DIV_cz">

        <link rel="apple-touch-icon" href="/static/img/site/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="57x57" href="/static/img/site/apple/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/static/img/site/apple/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/static/img/site/apple/apple-touch-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/static/img/site/apple/apple-touch-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/static/img/site/apple/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/static/img/site/apple/apple-touch-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/static/img/site/apple/apple-touch-icon-152x152.png">
        
        <meta name="msapplication-square70x70logo" content="/static/img/site/microsoft/div_70.png">
        <meta name="msapplication-square150x150logo" content="/static/img/site/microsoft/div_150.png">
        <meta name="msapplication-wide310x150logo" content="/static/img/site/microsoft/div_310x150.png">
        <meta name="msapplication-square310x310logo" content="/static/img/site/microsoft/div_310.png">
        <meta name="msapplication-TileImage" content="/static/img/site/microsoft/div_152.png">
        <meta name="msapplication-TileColor" content="#FFFFFF"> 
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">

        <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">

        <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

        <style>
            .card-wrapper {
                max-width: 1100px;
                margin: 0 40px 35px;
                overflow: hidden;
            }

            .swiper-wrapper {
                display: flex;
                margin-top: 5px;
            }

            .card-list .card-item {
                list-style: none;
                flex: 0 0 25%;
                box-sizing: border-box;
            }

            .card-list .card-item .card-link {
                user-select: none;
                display: block;
                background: #fff;
                border-radius: 12px;
                text-decoration: none;
                border: 2px solid transparent;
                /* box-shadow: 0 10px 10px rgba(0, 0, 0, 30%); */
                transition: 0.2s ease;
            }

            .card-list .card-item .card-link:active {
                cursor: grabbing;
            }

            .card-list .card-item .card-link .card-image {
                max-width: 100px; 
                height: 150px;
                object-fit: cover;
                border-radius: 10px;
            }

            .swiper-pagination-bullet {
                height: 13px;
                width: 13px;
                opacity: 0.5;
                background: #607d8b;
            }

            .swiper-pagination-bullet-active {
                opacity: 1;
            }

            .swiper-button-next,
            .swiper-button-prev {
                z-index: 10;
            }

            /* Vylepšení zobrazení pagination */
            .swiper-pagination {
                position: absolute;
                bottom: 10px;
                left: 50%;
                transform: translateX(-50%);
            }

            .swiper-slide {
                display: flex;
            }

            .swiper-button-next:after, .swiper-button-prev:after {
                font-family: swiper-icons;
                font-size: 20px;
                text-transform: none !important;
                letter-spacing: 0;
                font-variant: initial;
                line-height: 1;
                color: #607d8b;
            }

            .swiper-button-prev {
                height: 100%;
                top: 0;
                box-shadow: 10px 0px 20px 0px #f8f8f8;
            }

            .swiper-button-prev:is(.dark *) {
                box-shadow: 10px 0px 20px 0px #1a161f;
            }

            .swiper-button-next {
                height: 100%;
                top: 0;
                box-shadow: -10px 0px 20px 0px #f8f8f8;
            }

            .swiper-button-next:is(.dark *) {
                box-shadow: -10px 0px 20px 0px #1a161f;
            }


            @media screen and (max-width: 1024px) {
                .card-list .card-item {
                    flex: 1 0 33%; /* Pro obrazovky menší než 1024px bude zobrazeno 3 karty */
                }
            }

            @media screen and (max-width: 768px) {
                .card-list .card-item {
                    flex: 1 0 50%; /* Pro obrazovky menší než 768px (mobilní zařízení) budou zobrazeny 2 karty */
                }
            }



            .rating {
                position: relative;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                padding: 0;
            }

            .rating::before {
                content: '';
                position: absolute;
                top: 3px;
                left: 3px;
                width: 44px;
                height: 44px;
                background: #444444;
                border-radius: 50%;
                z-index: 2;
            }

            .rating::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 50px;
                height: 50px;
                background: conic-gradient(
                    var(--gradient-color, #0a0) 0%,
                    var(--gradient-color, #0a0) var(--gradient-value, 50%),
                    #777777 var(--gradient-value, 50%)
                );
                border-radius: 50%;
                z-index: 1;
            }

            .rating-inner {
                position: relative;
                z-index: 3;
                width: 100%;
                height: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
                color: #fff;
                font-size: 16px;
                font-weight: bold;
            }

            .rating-inner span {
                font-size: 10px;
                margin-left: 2px;
                color: #ffd700;
            }

            .rating-shadow {
                box-shadow: 3px 3px 10px rgb(147 147 147);
            }

            .rating-shadow:is(.dark *) {
                box-shadow: none;
            }

        </style>

    </head>

    <body class="bg-[#FFFFFF] text-[#0d0c0f] dark:bg-[#0d0c0f] dark:text-[#F9F9F9] d-flex flex-column min-vh-100">

        {% include "inc/navbar_index.html" %}

        <main class="flex-grow-1 max-w-[1440px] lg:mx-auto">
            <section class="text-[#0d0c0f] dark:text-[#F9F9F9] max-w-[1440px] flex flex-col lg:flex-row">
                
                {% include "inc/sidebar.html" %}
                
                <div class="row container my-4">
                    <!-- LEVÁ STRANA-->
                    <div class="col-lg-8">
                        <!-- carousel -->
                        <div class="carousel-container-index box-shadow rounded-1xl relative flex items-center mb-4">
                            <div id="films-carousel" class="carousel-index carousel-fade">
                                <div class="carousel-track-index" data-offset="0">
                                    <div class="carousel-item-index w-full border rounded-1xl">
                                        <a href="https://div.cz/knihy/">
                                            <img src="https://div.cz/img/book/knizni-div.webp" class="rounded-1xl w-full" alt="Knihy na DIV.cz">
                                            <h5 class="text-xl bottom-2 left-2 text-white bg-black bg-opacity-50 px-2 py-1 rounded">Svět knih, her a filmů</h5>
                                        </a>
                                    </div>                                
                                    <div class="carousel-item-index w-full border rounded-1xl">
                                        <a href="">
                                            <img src="https://div.cz/img/game/herni-div.webp" class="rounded-1xl w-full" alt="Hry na DIV.cz">
                                            <h5 class="text-xl bottom-2 left-2 text-white bg-black bg-opacity-50 px-2 py-1 rounded">Svět her</h5>
                                        </a>
                                    </div>
                                    <div class="carousel-item-index w-full border rounded-1xl">
                                        <a href="https://div.cz/filmy/">
                                            <img src="https://div.cz/img/movie/filmovy-div.webp" class="rounded-1xl w-full" alt="">
                                                <h5 class="text-xl bottom-2 left-2 text-white bg-black bg-opacity-50 px-2 py-1 rounded">Filmový svět</h5>
                                        </a>
                                    </div>
                                    <div class="carousel-item-index w-full border rounded-1xl">
                                        <a href="">
                                            <img src="https://cdn1.epicgames.com/salesEvent/salesEvent/EGS_RiseoftheTombRaider20YearCelebration_CrystalDynamics_S1_2560x1440-3bd5b3c4c11d46cc2dcb06bdf2f77627" class="rounded-1xl w-full" alt="">
                                            <h5 class="text-xl bottom-2 left-2 text-white bg-black bg-opacity-50 px-2 py-1 rounded"></h5>
                                        </a>
                                    </div>
                                    <div class="carousel-item-index w-full border rounded-1xl">
                                        <a href="">
                                            <img src="https://prh.imgix.net/articles/top10-fiction-1600x800.jpg" class="rounded-1xl w-full" alt="">
                                            <h5 class="text-xl bottom-2 left-2 text-white bg-black bg-opacity-50 px-2 py-1 rounded"></h5>
                                        </a>
                                    </div>
                                    <div class="carousel-item-index w-full border rounded-1xl">
                                        <a href="">
                                            <img src="https://i.ibb.co/R66Zgzz/koc48dky-c3batoc48dc3ad-rec.webp" class="rounded-1xl w-full" alt="">
                                            <h5 class="text-xl bottom-2 left-2 text-white bg-black bg-opacity-50 px-2 py-1 rounded"></h5>
                                        </a>
                                    </div>
                                    <div class="carousel-item-index w-full border rounded-1xl">
                                        <a href="">
                                            <img src="https://ctfs.ceskatelevize.cz/porady-s3/64884c0340b628ecc30d009b/card/bod-obnovy-1692031353725.jpg" class="rounded-1xl w-full" alt="">
                                            <h5 class="text-xl bottom-2 left-2 text-white bg-black bg-opacity-50 px-2 py-1 rounded"></h5>
                                        </a>
                                    </div>
                                    <div class="carousel-item-index w-full border rounded-1xl">
                                        <a href="">
                                            <img src="https://basecamplive.com/wp-content/uploads/2023/02/books.jpeg" class="rounded-1xl w-full" alt="">
                                            <h5 class="text-xl bottom-2 left-2 text-white bg-black bg-opacity-50 px-2 py-1 rounded"></h5>
                                        </a>
                                    </div>
                                    <div class="carousel-item-index w-full border rounded-1xl">
                                        <a href="/film/tancuj-matyldo">
                                            <img src="https://www.themoviedb.org/t/p/w1066_and_h600_bestv2//xWuWxb6N3pwAMw1EqI7So8gHtcL.jpg" class="rounded-1xl w-full" alt="">
                                            <h5 class="text-xl bottom-2 left-2 text-white bg-black bg-opacity-50 px-2 py-1 rounded">Tancuj Matydlo</h5>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                                
                        <div class="grid grid-cols-1">
                            <div class="card box-shadow mb-4">
                                <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                                    <p class="text-center">
                                        DIV.cz je stránka, která propojuje <a href="/knihy/">knihy</a>, <a href="/filmy/">filmy</a> a <a href="/hry/">hry</a> skrze postavy, lokality a
                                        další prvky.
                                    </p>
                                </div>
                            </div>

                            <!-- carousel filmy -->
                            <div class="card box-shadow mb-4">
                                <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                                    <h3 class="card-title font-bold after-h3">Ze světa filmů</h3>
                                    <div class="swiper">
                                        <div class="card-wrapper">
                                            <div class="card-list swiper-wrapper">
                                                {% for item in movies_carousel %}
                                                <div class="card-item swiper-slide flex flex-wrap justify-center">
                                                    <!-- hodnocení -->
                                                    <div class="flex justify-end w-full" style="margin-bottom: -40px;">
                                                        <div class="rating rating-shadow" data-rating="{{ item.divrating }}">
                                                            <div class="rating-inner">
                                                                {{ item.divrating }}%
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <a href="/film/{{ item.url }}" class="card-link box-shadow">
                                                        <img src="https://image.tmdb.org/t/p/w300_and_h450_bestv2{{ item.img }}" class="card-image" alt="{{ item.title }}">
                                                    </a>
                                                    <p class="text-center w-full"><small>{{ item.title }}</small></p>
                                                </div>
                                                {% endfor %}
                                            </div>
                                            
                                            <div class="swiper-pagination"></div>
                                            <div class="swiper-slide-button swiper-button-prev"></div>
                                            <div class="swiper-slide-button swiper-button-next"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- carousel seriály -->
                            <div class="card box-shadow mb-4">
                                <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                                    <h3 class="card-title font-bold after-h3">Ze světa seriálů</h3>
                                    <div class="swiper">
                                        <div class="card-wrapper">
                                            <div class="card-list swiper-wrapper">
                                                {% for item in series_carousel %}
                                                <div class="card-item swiper-slide flex flex-wrap justify-center">
                                                    <!-- hodnocení -->
                                                    <div class="flex justify-end w-full" style="margin-bottom: -40px;">
                                                        <div class="rating rating-shadow" data-rating="{{ item.divrating }}">
                                                            <div class="rating-inner">
                                                                {{ item.divrating }}%
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <a href="/serial/{{ item.url }}" class="card-link box-shadow">
                                                        <img src="https://image.tmdb.org/t/p/w300_and_h450_bestv2/{{ item.img }}" class="card-image" alt="{{ item.title }}">
                                                    </a>
                                                    <p class="text-center w-full"><small>{{ item.title }}</small></p>
                                                </div>
                                                {% endfor %}
                                            </div>
                                            
                                            <div class="swiper-pagination"></div>
                                            <div class="swiper-slide-button swiper-button-prev"></div>
                                            <div class="swiper-slide-button swiper-button-next"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- carousel knihy -->
                            <div class="card box-shadow mb-4">
                                <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                                    <h3 class="card-title font-bold after-h3">Ze světa knih</h3>
                                    <div class="swiper">
                                        <div class="card-wrapper">
                                            <div class="card-list swiper-wrapper">
                                                {% for item in books_carousel %}
                                                <div class="card-item swiper-slide flex flex-wrap justify-center">
                                                    <!-- hodnocení -->
                                                    <div class="flex justify-end w-full" style="margin-bottom: -40px;">
                                                        <div class="rating rating-shadow" data-rating="{{ item.divrating }}">
                                                            <div class="rating-inner">
                                                                {{ item.divrating }}%
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <a href="/kniha/{{ item.url }}" class="card-link box-shadow">
                                                        <img src="/static/kniha/{{ item.img }}" class="card-image" alt="{{ item.title }}">
                                                    </a>
                                                    {% if item.author %}
                                                    <p class="text-center w-full"><small>{{ item.author }}</small></p>
                                                    {% endif %}
                                                    <p class="text-center w-full"><small>{{ item.title }}</small></p>
                                                </div>
                                                {% endfor %}
                                            </div>
                                            
                                            <div class="swiper-pagination"></div>
                                            <div class="swiper-slide-button swiper-button-prev"></div>
                                            <div class="swiper-slide-button swiper-button-next"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- carousel hry -->
                            <div class="card box-shadow mb-4">
                                <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                                    <h3 class="card-title font-bold after-h3">Ze světa her</h3>
                                    <div class="swiper">
                                        <div class="card-wrapper">
                                            <div class="card-list swiper-wrapper">
                                                {% for item in games_carousel %}
                                                <div class="card-item swiper-slide flex flex-wrap justify-center">
                                                    <!-- hodnocení -->
                                                    <div class="flex justify-end w-full" style="margin-bottom: -40px;">
                                                        <div class="rating rating-shadow" data-rating="{{ item.divrating }}">
                                                            <div class="rating-inner">
                                                                {{ item.divrating }}%
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <a href="/hra/{{ item.url }}" class="card-link box-shadow">
                                                        <img src="/static/hra{{ item.img }}" class="card-image" alt="{{ item.title }}">
                                                    </a>
                                                    
                                                    <p class="text-center w-full"><small>{{ item.title }}</small></p>

                                                </div>
                                                {% endfor %}
                                            </div>
                                            
                                            <div class="swiper-pagination"></div>
                                            <div class="swiper-slide-button swiper-button-prev"></div>
                                            <div class="swiper-slide-button swiper-button-next"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- novinky -->
                            <div class="card box-shadow mb-4">
                                <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                                    <h3 class="card-title font-bold after-h3">Novinky</h3>

                                    <!-- H O V I N K A    add by M a r t i n  -->
                                    {% if user.is_superuser or user.is_staff %}
                                    <div class="add-content after">
                                        <details>
                                            <!-- Formulář pro přidání novinky -->
                                            <summary style="font-size: 1.17rem;">Přidej novinku</summary>
                                            <form method="POST" class="form">
                                                {% csrf_token %}
                                                <div class="form-group">{{ articlenews_form.title }}
                                                    <label for="id_title">:Titulek</label>
                                                </div>
                                                
                                                <div class="form-group">
                                                    <label for="id_news">Novinka:</label>
                                                    {{ articlenews_form.news }}
                                                </div>
                                                
                                                <div class="form-group">{{ articlenews_form.img }}
                                                    <label for="id_img">:Img (linkovat obrázky z div.cz)</label>
                                                </div>
                                                
                                                <div class="form-group">{{ articlenews_form.alt }}
                                                    <label for="id_alt">:Alt</label>
                                                </div>
                                                
                                                <div class="form-group">{{ articlenews_form.source }}
                                                    <label for="id_source">:Zdroj (Variety.com atp.)</label>
                                                </div>
                                                
                                                <div class="form-group">{{ articlenews_form.typ }}
                                                    <label for="id_typ">:Typ (Movie, Serie, Book, Game)</label>
                                                </div>

                                                <button type="submit" name="articlenews_submit" class="btn btn-primary">Přidat novinku</button>
                                            </form>
                                        </details>
                                    </div>
                                    {% endif %}

                                    <!-- výpis novinek -->
                                    <div class="w-full">
                                        {% for news in articlenews %}
                                        <div class="after last-line">
                                            <h3 class="">{{ news.title }}</h3>
                                            <p class="biography-text">{{ news.news|safe }}</p> 
                                            <p><a class="toggle-biography">Více...</a></p>
                                            <p class="text-end"><small>({{ news.source }} - {{ news.created }})</small></p>
                                        </div>
                                        {% endfor %}
                                    </div>
                                    
                                </div>
                            </div>
                           
                            <!-- Nejnovější komentáře -->
                            <div class="card box-shadow mb-4">
                                <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                                    <h3 class="card-title font-bold after-h3">Nejnovější komentáře</h3>
                                    <div class="flex flex-wrap">        
                                    {% for comment in movies_comments_9 %}
                                    <div class="card card-body dark:bg-[#0d0c0f] w-full p-3 mb-2 border rounded">
                                        <a href="/film/{{ comment.movieid__url }}">{{ comment.movieid__titlecz }}</a>
                                        <p class="before after">{{ comment.comment|truncatewords:20 }}</p>
                                        <div style="text-align:right">
                                            <small><p>Uživatel: 
                                                <a href="/uzivatel/{{ comment.user }}">{{ comment.user__username }}</a>
                                            <p></small>
                                        </div>
                                    </div>
                                    {% endfor %}
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- PRAVÁ STRANA -->
                    <div class="col-lg-4 article-section">
                        <!--<div class="card box-shadow mb-4">
                            <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                                <h3 class="card-title font-bold after-h3">Novinky v kinech</h3>
                                <ul class="v-kinech">
                                    {% for movie in movies_in_cinema %}
                                    <li>
                                        <a href="/film/{{ movie.movieid__url }}" class=" hover:underline">{{ movie.movieid__titlecz }}</a> 
                                        <br> 
                                        {{ movie.releasedate }}  - {{ movie.distributorid__name }}
                                    </li>
                                    {% endfor %}
                                </ul>
                                <a class="flex justify-end">Další >></a>
                            </div>
                        </div>-->

                        <!-- narozeniny -->
                        <div class="card box-shadow mb-4">
                            <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                            <h3 class="card-title font-bold after-h3">Narozeniny slaví</h3>
                            {% load cache %}
                                {% cache 57600 creators_list_birth %} 
                                    {% for creator in creators_list_8 %}
                                    <div class="flex flex-wrap after last-line">
                                        <img src="https://www.themoviedb.org/t/p/w300/{{ creator.img }}" class="" alt="{{ creator.lastname }}" style="width:100px;margin-right:10px;">
                                        <div class="flex flex-wrap" style="flex: 2;">
                                            <h3 class="mt-2"><a href="{% url 'creator_detail' creator.url %}" class="mb-4 w-full font-bold">{{ creator.firstname }} {{ creator.lastname }}</a></h3>
                                            <p class="card-text w-full">{{ creator.birthdate|date:"d.m.Y" }}</p>
                                            <p class="card-text w-full">
                                                {% if creator.knownfordepartment == "Acting" %}
                                                Herec
                                                {% elif creator.knownfordepartment == "Directing" %}
                                                Režisér
                                                {% elif creator.knownfordepartment == "Production" %}
                                                Producent
                                                {% elif creator.knownfordepartment == "Writing" %}
                                                Scénárista
                                                {% else %}
                                                Těžko říct
                                                {% endif %}
                                            </p>
                                        </div>
                                    </div>
                                    {% endfor %}
                                {% endcache %}        
                            </div>
                        </div>

                        <!-- články -->
                        <div class="card box-shadow mb-4">
                            <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                                <div class="flex flex-wrap justify-between card-title after-h3">
                                    <h3 class="font-bold">Články</h3><a href="{% url 'articles_index' %}"><small>Zobrazit vše</small></a>
                                </div>
                                {% for article in articles %}
                                <div class="flex flex-wrap items-center w-full border bg-[#FFFFFF] dark:bg-[#0d0c0f] rounded mt-2">
                                    <img class="article-thumbnail rounded-l" src="https://image.tmdb.org/t/p/w300_and_h450_bestv2{{ article.img }}';" style="width:100px; height:fit-content; aspect-ratio: 3 / 4; object-fit: contain; margin-right:5px">
                                    <div class="flex flex-wrap article-content" style="flex:2;">
                                        <a href="{{ article.url }}">{{ article.title }}</a>
                                        <p>{{ article.perex|truncatewords:9 }}</p>
                                    </div>
                                </div>               
                                {% endfor %}
                            </div>
                        </div>
                        
                        <!-- burza knih -->
                        <div class="card box-shadow mb-4">
                            <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                                <div class="flex flex-wrap card-title after-h3">
                                    <h3 class="font-bold">Burza knih</h3>
                                </div>
                                <!-- prodej -->
                                <div class="flex flex-wrap">
                                    <div class="flex flex-wrap justify-between w-full">
                                        <h4>Prodej</h4><a href="{% url 'books_market_offers' %}"><small>Zobrazit vše</small></a>
                                    </div>
                                    {% for listing in recent_listings %}
                                    <div class="flex items-center w-full border bg-[#FFFFFF] dark:bg-[#0d0c0f] rounded mt-2">
                                        <a href="{% url 'listing_detail_sell' listing.book.url listing.booklistingid %}">

            {% if book.img == "noimg.png" %}
                <!-- Pokud je book.img "noimg.png", zobraz výchozí obrázek -->
                <img src="/static/img/book/book.png" alt="Kniha {{ book.titlecz }}" class="rounded-l" style="width: 80px;" alt="odkaz na knihu">
                {% elif book.img == "GoogleID" %}
                <!-- Pokud je book.img "GoogleID", zobraz náhled z Google Books -->
                <img src="https://books.google.com/books/content?id={{ book.googleid }}&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api" alt="{{ book.titlecz }}" class="rounded-l" style="width: 80px;" alt="odkaz na knihu">
                {% else %}
                <!-- Jinak zobraz vlastní nahraný obrázek -->
                <img src="/static/kniha/{{ book.img }}" alt="{{ book.titlecz }}" class="rounded-l" style="width: 80px;" alt="odkaz na knihu">
            {% endif %}

                                        </a>
                                        <div class="ml-2" style="flex: 2;">
                                            <p>{{ listing.book.titlecz }}</p>
                                            <p>{{ listing.book.author }}</p>
                                            <p>{% if listing.price %}{{ listing.price|floatformat:0 }} Kč{% else %}Daruji{% endif %}</p>
                                            <p class="text-sm text-end w-full"><small>Přidal: {{ listing.user.username }} | {{ listing.createdat|date:"j.n.Y" }}</small></p>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>

                                <hr>

                                <!-- poptávka -->
                                <div class="flex flex-wrap">
                                    <div class="flex flex-wrap justify-between w-full">
                                        <h4>Poptávka</h4><a href="{% url 'books_market_wants' %}"><small>Zobrazit vše</small></a>
                                    </div>
                                    {% for listing in recent_listings %}
                                    <div class="flex items-center w-full border bg-[#FFFFFF] dark:bg-[#0d0c0f] rounded mt-2">
                                        <a href="{% url 'listing_detail_sell' listing.book.url listing.booklistingid %}">

            {% if book.img == "noimg.png" %}
                <!-- Pokud je book.img "noimg.png", zobraz výchozí obrázek -->
                <img src="/static/img/book/book.png" alt="Kniha {{ book.titlecz }}" class="rounded-l" style="width: 80px;" alt="odkaz na knihu">
                {% elif book.img == "GoogleID" %}
                <!-- Pokud je book.img "GoogleID", zobraz náhled z Google Books -->
                <img src="https://books.google.com/books/content?id={{ book.googleid }}&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api" alt="{{ book.titlecz }}" class="rounded-l" style="width: 80px;" alt="odkaz na knihu">
                {% else %}
                <!-- Jinak zobraz vlastní nahraný obrázek -->
                <img src="/static/kniha/{{ book.img }}" alt="{{ book.titlecz }}" class="rounded-l" style="width: 80px;" alt="odkaz na knihu">
            {% endif %}

                                        </a>
                                        <div class="flex flex-wrap content-between h-full p-2" style="flex: 2;">
                                            <p class="w-full">{{ listing.book.titlecz }}</p>
                                            <p class="w-full">{{ listing.book.author }}</p>
                                            <p class="w-full">{% if listing.price %}{{ listing.price|floatformat:0 }} Kč{% else %}Daruji{% endif %}</p>
                                            <p class="text-sm text-end w-full"><small>Přidal: {{ listing.user.username }} | {{ listing.createdat|date:"j.n.Y" }}</small></p>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <!-- licence her -->
                        <div class="card box-shadow mb-4">
                            <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl self-start">
                                <h3 class="card-title font-bold after-h3">Licence her</h3>
                                <ul>
                                    <li>Playstation Store<!--, kredit 500,--></li>
                                    <li>xBox Store<!--, kredit 1000,--></li>
                                </ul>
                            </div>
                        </div>

                    </div>
                </div>
            </section>
        </main>

        {% include "inc/footer.html" %}

        <!-- více, méně -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                // Najít všechny články s třídou "biography-text" a "toggle-biography"
                const bioElements = document.querySelectorAll(".biography-text");
                const toggleButtons = document.querySelectorAll(".toggle-biography");

                bioElements.forEach((bioElement, index) => {
                    const fullHTML = bioElement.innerHTML; // Celý text včetně HTML
                    const maxLength = 400; // Požadovaný počet znaků

                    // Vytvořit text bez HTML pro zkrácení
                    const tempElement = document.createElement("div");
                    tempElement.innerHTML = fullHTML;
                    const plainText = tempElement.innerText;

                    // Zkrácený text (bez HTML, ale jen do maxLength znaků)
                    const truncatedText = plainText.substring(0, maxLength);

                    // Zkrácený HTML (pro zobrazení s HTML tagy)
                    let truncatedHTML = "";
                    let charCount = 0;
                    tempElement.childNodes.forEach(node => {
                        if (charCount >= maxLength) return; // Nepřidávat další znaky
                        if (node.nodeType === Node.TEXT_NODE) {
                            // Přidat textový obsah
                            const remainingChars = maxLength - charCount;
                            truncatedHTML += node.textContent.substring(0, remainingChars);
                            charCount += node.textContent.length;
                        } else if (node.nodeType === Node.ELEMENT_NODE) {
                            // Přidat celý HTML tag (rekurzivně zpracovaný)
                            const nodeHTML = node.outerHTML;
                            if (charCount + node.textContent.length <= maxLength) {
                                truncatedHTML += nodeHTML;
                                charCount += node.textContent.length;
                            }
                        }
                    });

                    // Přidat tři tečky na konec, pokud je text zkrácený
                    if (plainText.length > maxLength) {
                        truncatedHTML += "...";
                    }

                    // Nastavit zkrácený text
                    bioElement.innerHTML = truncatedHTML;

                    // Pokud má text více než maxLength znaků, přidat funkci na zobrazení plného textu
                    if (plainText.length > maxLength) {
                        toggleButtons[index].style.display = "inline"; // Zobrazit tlačítko
                        toggleButtons[index].addEventListener("click", function () {
                            if (bioElement.innerHTML === truncatedHTML) {
                                bioElement.innerHTML = fullHTML; // Zobrazit celý text
                                this.innerText = "...Méně"; // Změnit text tlačítka
                            } else {
                                bioElement.innerHTML = truncatedHTML; // Zobrazit zkrácený text
                                this.innerText = "Více..."; // Změnit text tlačítka
                            }
                        });
                    } else {
                        toggleButtons[index].style.display = "none"; // Skryjeme tlačítko
                    }
                });
            });

        </script>

        <!-- carousel ze světa... -->
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                new Swiper('.card-wrapper', {
                    loop: true,
                    speed: 700,
                    spaceBetween: 20,  // Menší mezera mezi kartami, pokud je příliš velká
                    slidesPerView: 4,  // Na větších obrazovkách zobrazení 4 karet
                    slidesPerGroup: 1,  // Posouvá se vždy o 1 kartu

                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                        dynamicBullets: true,
                    },

                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev',
                    },

                    breakpoints: {
                        0: {
                            slidesPerView: 2,  // Na mobilu 2 karty
                            spaceBetween: 10,  // Menší mezera mezi kartami na mobilu
                        },
                        768: {
                            slidesPerView: 3,  // Na tabletu 3 karty
                            spaceBetween: 15,  // Střední mezera mezi kartami na tabletu
                        },
                        1024: {
                            slidesPerView: 4,  // Na desktopu 4 karty
                            spaceBetween: 20,  // Větší mezera mezi kartami na desktopu
                        },
                    },
                });
            });
        </script>

        {% load static %}
        
        <script src="{% static 'js/script.js' %}"></script>
        <script src="{% static 'js/index.js' %}"></script>

    </body>
</html>