{% extends "games/base.html" %}
{% load humanize %}
{% load custom_filters %}

{% block title %}{{ listing.get_listingtype_display }} {{ game.title }} | DIV.cz{% endblock %}

{% block meta %}
    <style>
        .reserve-form {
            width: 100%;
            clear: both;
            margin-top: 1rem;
        }

        .listing-layout {
            display: grid;
            grid-template-columns: 3fr 1fr;
            gap: 2rem;
        }

        .listing-main {}

        .listing-sidebar {}

        .alert-box {
            margin: 1rem 0;
            padding: 1rem;
            background: #f5f5f5;
        }

        .listing-image {
            float: left;
            width: 200px;
            margin: 0 16px 8px 0;
            border-radius: 6px;
        }

        .listing-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .shipping-box {
            background: #cfefcf;
            padding: 1rem;
            margin: 1.5rem 0;
        }

        .listing-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .payment-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .qr-box img {
            max-width: 200px;
        }

        .sidebar-section {
            display: flex;
            justify-content: space-between;
            margin: 0.5rem 0;
        }
    </style>
{% endblock %}

{% block content %}

<div class="container listing-layout">

    <!-- LEVÁ STRANA -->
    <div class="listing-main">

        <h2 class="breadcrumb">DIVkvariát / <a href=""></a></h2>
        <hr>

        <div class="alert-box">
            Zpráva
        </div>

        <div class="listing-preview">
            <a href="">
                <img src="" alt="" class="listing-image">
                <img src="" alt="" class="listing-image">
                <img src="" alt="" class="listing-image">
            </a>

            <h2 class="listing-title">
                <a href=""></a>
            </h2>

            <p class="listing-subtitle"></p>

            <p class="listing-price-line">
                <strong>Cena:</strong> <span></span>
            </p>
        </div>

        <div class="card">
            <div class="card-body">

                <div class="listing-header">
                    <div>
                        <p>Cena:</p>
                        <span class="listing-price"></span>
                        <span class="listing-shipping">(+ Kč poštovné)</span>
                    </div>

                    <div class="listing-date-box">
                        <span>Datum vložení</span>
                        <div class="listing-date"></div>
                    </div>
                </div>

                <div class="shipping-box">
                    <p><strong>Hru zašlete na adresu:</strong></p>
                    <p></p>
                </div>

                <div class="listing-description">
                    <span>Popis:</span>
                </div>

                <div class="listing-info-grid">
                    <div><strong>Stav:</strong> <span></span></div>
                    <div><strong>Lokalita:</strong> <span></span></div>
                    <div><strong>Osobní převzetí:</strong> <span></span></div>
                    <div><strong>Pošta:</strong> <span>+ Kč</span></div>
                    <div>
                        <strong>Prodávající:</strong>
                        <a href=""></a>
                        <a href=""><i class="fa-solid fa-envelope"></i></a>
                    </div>
                </div>

            </div>
        </div>

        <!-- REZERVACE -->
        <form method="post" class="reserve-form">
            <input type="hidden" name="reserve_listing" value="1">

            <div class="form-group">
                <label for="shippingaddress">Kam si přejete hru zaslat?</label>
                <textarea name="shippingaddress" rows="4" class="form-control" required
                    placeholder="Jméno, ulice, město, PSČ (volitelně telefon)"></textarea>
            </div>

            <div class="form-group">
                <label for="phone">Telefon (pro zásilkovnu):</label>
                <input type="tel" name="phone" class="form-control" required>
            </div>

            <div class="form-group">
                <label for="commission">Příspěvek na chod webu (volitelný):</label>
                <input type="number" name="commission" min="0" value="10" class="form-control">
            </div>

            <div class="form-group checkbox-group">
                <label>
                    <input type="checkbox" name="agree_terms" required>
                    Souhlasím s předáním údajů a s
                    <a href="/podminky-pouziti" target="_blank">Podmínkami používání</a>
                    a <a href="/ochrana-osobnich-udaju" target="_blank">Ochranou osobních údajů</a>.
                </label>
            </div>

            <button type="submit" class="btn add-game">
                Rezervovat knihu
            </button>
        </form>

        <!-- PLATBA -->
        <div class="card">
            <div class="card-body">

                <h3 class="section-title">Platební údaje</h3>

                <div class="payment-grid">
                    <div><strong>Cena knihy:</strong><p> Kč</p></div>
                    <div><strong>Poštovné:</strong><p> Kč</p></div>
                    <div><strong>Provozní poplatek:</strong><p> Kč</p></div>
                    <div class="payment-total">
                        <strong>Celkem k úhradě:</strong>
                        <p> Kč</p>
                    </div>
                </div>

                <div class="payment-methods">
                    <div>
                        <h4>Bankovní převod</h4>
                        <ul>
                            <li>Číslo účtu: 2602912559/2010</li>
                            <li>IBAN: CZ5620100000002602912559</li>
                            <li>SWIFT: FIOBCZPPXXX</li>
                            <li>Variabilní symbol: 123456</li>
                            <li>Poznámka: Platba za knihu</li>
                        </ul>
                    </div>

                    <div class="qr-box">
                        <img src="qr.png" alt="QR Platba">
                    </div>
                </div>

            </div>
        </div>

        <p class="login-note">
            Pro rezervaci nebo nákup knihy se musíš
            <a href="/prihlaseni/">přihlásit</a> nebo
            <a href="/registrace/">registrovat</a>.
        </p>

    </div>

    <!-- PRAVÁ STRANA -->
    <div class="listing-sidebar">
        <div class="card">
            <div class="card-body">

                <h3 class="sidebar-title">Burza her</h3>
                <p>Nabídek: 0 | Poptávek: 0</p>

                <div class="sidebar-section">
                    <h4>Prodej</h4>
                    <a href="#">Zobrazit vše</a>
                </div>

                <hr>

                <div class="sidebar-section">
                    <h4>Poptávka</h4>
                    <a href="#">Zobrazit vše</a>
                </div>

            </div>
        </div>
    </div>

</div>

{% endblock %}
