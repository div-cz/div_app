{% extends "games/base.html" %}
{% load i18n %}
{% load ratings %}
{% load static %}

{% block title %} | DIV.cz{% endblock %}

{% block content %}

<div class="row container my-4">
    <!-- Levá strana -->
    <div class="col-lg-8">
        <!-- expandable cards - nejlépe hodnocené -->
        <div class="expandable">
            <div class="panel active border" style="background-image: url('https://cdn1.epicgames.com/salesEvent/salesEvent/EGS_RiseoftheTombRaider20YearCelebration_CrystalDynamics_S2_1200x1600-a73f93bb560142e08d56db4c2bfdb03c')">
                <!-- <h3>Tomb Raider</h3> -->
            </div>
            <div class="panel border" style="background-image: url('https://upload.wikimedia.org/wikipedia/tr/thumb/b/be/Grand_Theft_Auto_V_oyununun_kapa%C4%9F%C4%B1.jpg/640px-Grand_Theft_Auto_V_oyununun_kapa%C4%9F%C4%B1.jpg')">
                <!-- <h3>GTA V.</h3> -->
            </div>
            <div class="panel border" style="background-image: url('https://m.media-amazon.com/images/I/616+j9jEM4L._AC_UF894,1000_QL80_.jpg')">
                <!-- <h3>The Last of Us</h3> -->
            </div>    
            <div class="panel border" style="background-image: url('https://m.media-amazon.com/images/M/MV5BZDllZjMwOGEtNGJmYy00ZDcxLThjMWQtNGExNjNhMjQ1NWI3XkEyXkFqcGdeQXVyMTA0MTM5NjI2._V1_.jpg')">
                <!-- <h3>Age of Empires</h3> -->
            </div>
            <div class="panel border" style="background-image: url('https://images.igdb.com/igdb/image/upload/t_1080p_2x/co5rgr.jpg')">
                <!-- <h3>Moorhuhn</h3> -->
            </div>
            <div class="panel border" style="background-image: url('https://static0.thegamerimages.com/wordpress/wp-content/uploads/sharedimages/2024/04/mortal-kombat-11.jpg')">
                <!-- <h3>Mortal Kombat 11</h3> -->
            </div>
            <div class="panel border" style="background-image: url('https://a.allegroimg.com/original/1198e1/a41ac8974f6c83a9feae5a899740/RIDERS-REPUBLIC-PL-PC-KLIC-UBISOFT')">
                <!-- <h3>Riders republic</h3> -->
            </div>
            <div class="panel border" style="background-image: url('https://image.api.playstation.com/vulcan/ap/rnd/202208/0921/Ah7Ar9MU0r1BBlzAUflmhyQP.png')">
                <!-- <h3>Hogwarts Legacy</h3> -->
            </div>
            <div class="panel border" style="background-image: url('https://image.api.playstation.com/vulcan/ap/rnd/202401/1021/3fd720bd58def95d9e027f6b6c69b9a7afceb078e7099f59.png')">
                <!-- <h3>NHL 24</h3> -->
            </div>
            <div class="panel border" style="background-image: url('https://m.media-amazon.com/images/I/61CnfV+YtwL._AC_UF1000,1000_QL80_.jpg')">
                <!-- <h3>Need for Speed</h3> -->
            </div>
        </div>

        <div class="row my-4">
            <div class="grid grid-cols-1 gap-2">
            {% for game in games %}
                <div class="game-card grid w-full bg-[#F9F9F9] dark:bg-[#1A161F] border rounded-1xl">
                    <a href="/hra/{{ game.url }}" class="w-auto">
                        <img src="/static/img/game/game.png" alt="{{ game.title }}" class="card-img-top rounded-l-lg" style="width: 100px;">
                    </a>
                    <div class="card-body">
                        <h4 class="card-title"><a href="/hra/{{ game.url }}">{{ game.title }}</a> ({{ game.year }})</h4>
                        <p class="card-text">{{ game.description|safe|truncatewords:40 }}</p>
                    </div>
                </div>
            {% endfor %}
            </div>
        </div>

        <div class="card box-shadow mb-4">
            <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl">
                <h3 class="card-title font-bold after-h3">Má komunita</h3>
                <div>   
                    <div class="flex">
                        <img src="/static/img/movie/w200/nomovie.jpg" alt="{{ movie.titlecz }}" style="width: 15%;">   
                        <div class="flex flex-wrap content-start ml-2" style="width: 83%;">
                            <a class="w-full" href="/hry/">The last of us</a> <!-- název hry -->
                            <p class="w-full">Komentář, který jsem napsala ke hře je zde :)</p>
                        </div>
                        
                    </div>  
                    <p class="flex justify-end">Uživatel: <a href="/uzivatel/" class="ml-2">VendaCiki</a></p>
                </div>
            </div>
        </div>

    </div>
    
    <!-- Pravá strana -->
    <div class="col-lg-4 article-section">
        <div class="card box-shadow mb-4">
            <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl">
                <h3 class="card-title font-bold after-h3">Právě vyšlo</h3>
                <ul class="w-full" style="list-style-type:none">
                    <li><a href="/hra/ceske-legendy">GTA VI.</a></li>
                    <li><a href="/hra/ceske-legendy">DOOM</a></li>
                    <li><a href="/hra/ceske-legendy">České legendy</a></li>
                    <li><a href="">COD</a></li>
                    <li><a href="">Tony Hawk</a></li>
                    <li><a href="">Need for speed</a></li>
                    <li><a href="">NHL 10</a></li>
                    <li><a href="">Worms</a></li>
                    <li><a href="">Godzilla</a></li>
                </ul>
            </div>
        </div>

        <div>
            <div class="card box-shadow mb-4">
                <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl">
                    <h3 class="card-title font-bold after-h3">Žánry</h3>
                    <div>
                        <a href="/hry/akcni">Akční</a> |
                        <a href="/hry/adventury">Adventury</a> |
                        <a href="/hry/detske">Dětské</a> |
                        <a href="/hry/horor">Horor</a> |
                        <a href="/hry/hudebni">Hudební</a> |
                        <a href="/hry/logicke">Logické</a> |
                        <a href="/hry/moba">MOBA</a> |
                        <a href="/hry/online">Online</a> |
                        <a href="/hry/rpg">RPG</a> |
                        <a href="/hry/sandbox">Sandbox</a> |
                        <a href="/hry/simulatory">Simulátory</a> |
                        <a href="/hry/sportovni">Sportovní</a> |
                        <a href="/hry/strategie">Strategie</a> |
                        <a href="/hry/zavodni">Závodní</a> 
                    </div>
                </div>
            </div>

            <div class="card box-shadow mb-4">
                <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl">
                    <h3 class="card-title font-bold after-h3">Články</h3>


                </div>
            </div>
            
            <div class="card box-shadow mb-4">
                <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl">
                    <h3 class="card-title font-bold after-h3">Roky</h3>
                    <div>
                        <a href="/hry/2024">2024</a> |
                        <a href="/hry/2023">2023</a> |
                        <a href="/hry/2022">2022</a> |
                        <a href="/hry/2021">2021</a> |
                        <a href="/hry/2020">2020</a> |
                        <a href="/hry/2019">2019</a> |
                        <a href="/hry/2018">2018</a> |
                        <a href="/hry/2017">2017</a> |
                        <a href="/hry/2016">2016</a> |
                        <a href="/hry/2015">2015</a> |
                        <a href="/hry/2014">2014</a> |
                        <a href="/hry/2013">2013</a> |
                        <a href="/hry/2012">2012</a> |
                        <a href="/hry/2011">2011</a> |
                        <a href="/hry/2010">2010</a> |
                        <a href="/hry/2009">2009</a> |
                        <a href="/hry/2008">2008</a> |
                        <a href="/hry/2007">2007</a> |
                        <a href="/hry/2006">2006</a> |
                        <a href="/hry/2005">2005</a> |
                        <a href="/hry/2004">2004</a> |
                        <a href="/hry/2003">2003</a> |
                        <a href="/hry/2002">2002</a> |
                        <a href="/hry/2001">2001</a>

                        <details>
                            <summary>Další roky</summary>
                            <a href="/hry/2000">2000</a> |
                            <a href="/hry/1999">1999</a> |
                            <a href="/hry/1998">1998</a> |
                            <a href="/hry/1997">1997</a> |
                            <a href="/hry/1996">1996</a> |
                            <a href="/hry/1995">1995</a> |
                            <a href="/hry/1994">1994</a> |
                            <a href="/hry/1993">1993</a> |
                            <a href="/hry/1992">1992</a> |
                            <a href="/hry/1991">1991</a> |
                            <a href="/hry/1990">1990</a> |
                            <a href="/hry/1989">1989</a> |
                            <a href="/hry/1988">1988</a> |
                            <a href="/hry/1987">1987</a> |
                            <a href="/hry/1986">1986</a> |
                            <a href="/hry/1985">1985</a> |
                            <a href="/hry/1984">1984</a> |
                            <a href="/hry/1983">1983</a> |
                            <a href="/hry/1982">1982</a> |
                            <a href="/hry/1981">1981</a> |
                            <a href="/hry/1980">1980</a> |
                            <a href="/hry/1979">1979</a> |
                            <a href="/hry/1978">1978</a> |
                            <a href="/hry/1977">1977</a> |
                            <a href="/hry/1976">1976</a> |
                            <a href="/hry/1975">1975</a> |
                            <a href="/hry/1974">1974</a> |
                            <a href="/hry/1973">1973</a> |
                            <a href="/hry/1972">1972</a> |
                            <a href="/hry/1971">1971</a> |
                            <a href="/hry/1970">1970</a> |
                            <a href="/hry/1969">1969</a> |
                            <a href="/hry/1968">1968</a> |
                            <a href="/hry/1967">1967</a> |
                            <a href="/hry/1966">1966</a> |
                            <a href="/hry/1965">1965</a> |
                            <a href="/hry/1964">1964</a> |
                            <a href="/hry/1963">1963</a> |
                            <a href="/hry/1962">1962</a> |
                            <a href="/hry/1961">1961</a> |
                            <a href="/hry/1960">1960</a> |
                            <a href="/hry/1959">1959</a> |
                            <a href="/hry/1958">1958</a> 
                        </details>
                    </div>
                </div>
            </div>

            <div class="card box-shadow mb-4">
                <div class="card-body w-full bg-[#F9F9F9] dark:bg-[#1A161F] rounded-1xl">
                    <h3 class="card-title font-bold after-h3">V databázi máme:</h3>
                    <ul>
                        <li><!--počet--><p>her na PC</p></li>
                        <li><!--počet--><p>her na PS</p></li>
                        <li><!--počet--><p>her na Xbox</p></li>
                        <li><!--počet--><p>stolních her</p></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        // Initialize DataTable
        var table = $('#gamesTable').DataTable();

        // Apply the filter
        $('#platformFilter, #ratingFilter').on('change', function() {
            table.draw();
        });

        // Custom filtering function
        $.fn.dataTable.ext.search.push(
            function(settings, data, dataIndex) {
                var platform = $('#platformFilter').val();
                var minRating = $('#ratingFilter').val();

                var rowPlatform = data[1]; // Platform is in the second column
                var rowRating = parseInt(data[3].split('/')[0]); // Extract rating from format "X/10"

                if ((platform === "" || platform === rowPlatform) && (minRating === "0" || rowRating >= minRating)) {
                    return true; // Show row
                }
                return false; // Hide row
            }
        );
    });

    $('#gamesTable').DataTable({
        "language": {
            "lengthMenu": "Zobrazit _MENU_ záznamů",
            "zeroRecords": "Žádné záznamy nebyly nalezeny",
            "info": "Strana _PAGE_ z _PAGES_",
            "infoEmpty": "Žádné záznamy k dispozici",
            "infoFiltered": "(vyfiltrováno z celkem _MAX_ záznamů)",
            "search": "Hledat:",
            "paginate": {
                "first":      "První",
                "last":       "Poslední",
                "next":       "Další",
                "previous":   "Předchozí"
            },
        }
    });
</script>

{% endblock %}
