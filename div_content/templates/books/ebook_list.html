{% extends "books/base.html" %}
{% block title %}{{ page_title }} | DIV.cz{% endblock %}

{% block meta %}

    {% if page_type == "all" %}
        <meta name="description" content="V≈°echny e-knihy na DIV.cz. Objevte datab√°zi e-knih zdarma i placen√Ωch, recenze a dostupn√© form√°ty.">
        <link rel="canonical" href="https://div.cz/eknihy/">
        <meta name="keywords" content="e-knihy, elektronick√© knihy, datab√°ze e-knih, zdarma e-knihy, placen√© e-knihy, recenze e-knih">
        <meta property="og:title" content="V≈°echny e-knihy | DIV.cz">
        <meta property="og:description" content="Prozkoumejte datab√°zi e-knih na DIV.cz ‚Äî zdarma i placen√©, s recenzemi a dostupn√Ωmi form√°ty.">
        <meta property="og:image" content="https://media.div.cz/hero/eknihy/eknihy-div.webp">
        <meta property="og:url" content="https://div.cz/eknihy/">

    {% elif page_type == "free" %}
        <meta name="description" content="E-knihy zdarma na DIV.cz. Stahujte leg√°ln√≠ e-knihy ve form√°tech ePub, PDF a dal≈°√≠ bezplatnƒõ.">
        <link rel="canonical" href="https://div.cz/eknihy/zdarma/">
        <meta name="keywords" content="e-knihy zdarma, elektronick√© knihy zdarma, ePub zdarma, PDF zdarma, volnƒõ dostupn√© knihy">
        <meta property="og:title" content="E-knihy zdarma | DIV.cz">
        <meta property="og:description" content="Prozkoumejte e-knihy zdarma na DIV.cz ‚Äî leg√°ln√≠ tituly ke sta≈æen√≠ ve form√°tech ePub, PDF a dal≈°√≠ch.">
        <meta property="og:image" content="https://media.div.cz/hero/clanek/eknihy-zdarma.webp">
        <meta property="og:url" content="https://div.cz/eknihy/zdarma/">

    {% elif page_type == "paid" %}
        <meta name="description" content="Placen√© e-knihy na DIV.cz. Objevte datab√°zi elektronick√Ωch knih k zakoupen√≠ ve form√°tech ePub, PDF a dal≈°√≠ch.">
        <link rel="canonical" href="https://div.cz/eknihy/placene/">
        <meta name="keywords" content="placen√© e-knihy, elektronick√© knihy k prodeji, ePub e-knihy, PDF e-knihy, koupit e-knihu">
        <meta property="og:title" content="Placen√© e-knihy | DIV.cz">
        <meta property="og:description" content="Prohl√©dnƒõte si placen√© e-knihy na DIV.cz ‚Äî ≈°irok√° nab√≠dka titul≈Ø ve form√°tech ePub, PDF a dal≈°√≠ch.">
        <meta property="og:image" content="https://media.div.cz/hero/eknihy/eknihy-div.webp">
        <meta property="og:url" content="https://div.cz/eknihy/placene/">
    {% endif %}

<style>
a.btn.books {
    display: flex;
    align-items: center;      /* vertik√°ln√≠ zarovn√°n√≠ doprost≈ôed */
    justify-content: center;  /* horizont√°ln√≠ zarovn√°n√≠ doprost≈ôed */
    padding: 12px 24px;       /* m√≠sto pevn√© v√Ω≈°ky pou≈æij padding */
    font-weight: 600;
    font-size: 16px;
    border-radius: 6px;
    margin: 8px 0;
    text-align: center;
    transition: all 0.2s ease-in-out;
    box-sizing: border-box;
}


/* Aktivn√≠ */

a.btn.books.add-book {
    background-color: #61872B !important;
    color: #fff !important;
    border: 1px solid #61872B !important;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    position: relative;
}

/* Neaktivn√≠ */
a.btn.books.btn-outline-secondary {
    background-color: #fff !important;
    border: 1px solid #61872B !important;
    color: #61872B !important;
}

/* Desktop */
@media (min-width: 769px) {
    .buttons-row {
        display: flex;
        gap: 10px;
        justify-content: flex-start;
    }
    .buttons-row .btn.books {
        margin: 0; /* jen vodorovn√° mezera, proto≈æe flex */
    }
    a.btn.books.add-book {
        top: 0px;  /* ‚úÖ posunut√≠ jen na PC */
    }
}

/* Mobil */
@media (max-width: 768px) {
    .buttons-row {
        display: block;
    }
    .buttons-row .btn.books {
        display: block;
        width: 100%;
        margin: 10px 0; /* kr√°snƒõ stejn√© rozestupy */
    }
    a.btn.books.add-book {
        top: 0; /* ‚úÖ ≈æ√°dn√Ω posun na mobilu */
    }
}

</style>

{% endblock %}
{% block content %}
<div class="container my-4">
    <h1 class="mb-4 font-bold text-2xl">{{ page_title }}</h1>



<div class="buttons-row mb-4">
    <a href="/eknihy/" 
       class="btn books {% if page_type == 'all' %}add-book{% else %}btn-outline-secondary{% endif %}">
       V≈°echny e-knihy
    </a>
    <a href="/eknihy/zdarma/" 
       class="btn books {% if page_type == 'free' %}add-book{% else %}btn-outline-secondary{% endif %}">
       Jen zdarma
    </a>
    <a href="/eknihy/placene/" 
       class="btn books {% if page_type == 'paid' %}add-book{% else %}btn-outline-secondary{% endif %}">
       Jen placen√©
    </a>
</div>








    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {% for book in page_obj %}
        <div class="flex border rounded-lg bg-[#F9F9F9] dark:bg-[#1A161F] p-2">
            <a href="/kniha/{{ book.url }}" class="flex-shrink-0" style="width:100px;">
                {% if book.img == "noimg.png" %}
                    <img src="/static/img/book/book.png" alt="{{ book.titlecz|default:book.title }}" class="rounded w-full">
                {% elif book.img == "GoogleID" %}
                    <img src="https://books.google.com/books/content?id={{ book.googleid }}&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api" alt="{{ book.titlecz|default:book.title }}" class="rounded w-full">
                {% else %}
                    <img src="https://media.div.cz/knihy/{{ book.img }}" alt="{{ book.titlecz|default:book.title }}" class="rounded w-full">
                {% endif %}
            </a>

<div class="ml-3 flex-1">
    <h4 class="font-bold"><a href="/kniha/{{ book.url }}">{{ book.titlecz|default:book.title }}</a></h4>
    <p class="text-sm text-gray-700 dark:text-gray-300">{{ book.author }}</p>
    <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">{{ book.description|default_if_none:""|truncatewords:20 }}</p>

    <p class="text-sm mt-1">
        üìñ Form√°ty:
        {% for isbn in book.bookisbn_set.all %}
            {% if isbn.format %}
                <span class="inline-block bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs">{{ isbn.format|upper }}</span>
            {% endif %}
        {% endfor %}
    </p>

    <p class="text-sm mt-2 font-semibold">
        {% if book.min_price == 0 %}
            üí∞ Zdarma
        {% elif book.min_price %}
            üí∞ od {{ book.min_price|floatformat:0 }} Kƒç
        {% else %}
            üí∞ Nen√≠ dostupn√° cena
        {% endif %}
    </p>
</div>


        </div>
        {% empty %}
        <p>≈Ω√°dn√© knihy k dispozici.</p>
        {% endfor %}
    </div>

    <div class="pagination mt-6">
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; prvn√≠</a>
            <a href="?page={{ page_obj.previous_page_number }}">p≈ôedchoz√≠</a>
        {% endif %}
        <span class="current">Str√°nka {{ page_obj.number }} z {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">dal≈°√≠</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">posledn√≠ &raquo;</a>
        {% endif %}
    </div>
</div>
{% endblock %}
