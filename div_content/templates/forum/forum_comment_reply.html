{% extends "forum/base.html" %}

{% load i18n %}

{% block title %}
Odpovědět {{ topic.title }}
{% endblock title %}

{% block content %}

<h2>
    <a class="hover:underline" href="{% url 'forum' %}">Diskuzní fórum</a>
    <span> / </span>
    <a class="hover:underline" href="{% url 'forum_section_detail' slug=topic.section.slug %}">{{ topic.section.title }}</a>
    <span> / </span>
    {{ topic.title }}
</h2>

{% if user.is_authenticated %}
    <section style="width: 75%;">
        <h2>Odpovědět na komentář</h2>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button class="btn add" type="submit">Odpovědět</button> <!-- sem barvičky tlačítek -->
        </form>
    </section>
{% endif %}

<!-- komentáře se načítají v šabloně níže -->
{% include "forum/load_all_comments.html" %}

{% comment %}
{% for comment in comments %}

    <ol class="card card-body">

        <li class="after">{{ comment.body|safe }}</li>
        <div class="flex justify-between">
            <p>
                <a href="{% url 'user_profile_with_profil' user_id=comment.user.id %}">{{ comment.user }}</a> - {{ comment.createdat }} {% if comment.lasteditedat %}<i><small>(Upraveno {{ comment.lasteditedat }})</small></i>{% endif %}
            </p>
            
            {% if user == comment.user or user.is_staff %}
                <p class="mb-0 text-end" style="width: 140px;">
                    <a href="#">Upravit</a> | <a href="">Smazat</a>
                </p>
            {% endif %}    
        </div>
        
    </ol>
{% endfor %}
{% endcomment %}
{% endblock content %}

{% block script %}

<script src="/web/js/comment-summernote.js"></script>

{% endblock script %}