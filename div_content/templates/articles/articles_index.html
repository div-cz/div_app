{% extends "articles/base.html" %}
{% load i18n %}
{% load ratings %}
{% load static %}

{% block title %}ƒål√°nky | Datab√°ze DIV{% endblock title %}

{% block content %}

<link href="https://media.div.cz/css/navbar_together.css" rel="stylesheet">

<style>
    .articles {
        display: grid;
        padding-left: 0;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0px 0px 5px #c0c0c0;
    }

    .custom-select {
        position: relative;
        display: flex;
        justify-content: flex-end;
        margin: 10px;
        text-align: center;
        min-width: 175px;
    }

    .select-options {
        flex-wrap: wrap;
        position: absolute;
        background-color: #f9f9f9;
        box-shadow: 0px 0px 10px 0px #9E9E9E;
        border-radius: 10px;
        z-index: 1;
        right: 0;
        margin-top: 35px;
        text-align: left;
        font-size: small;
    }

    .select-options a {
        color: black;
        padding: 12px 16px;
        display: block;
        cursor: pointer;
        width: 100%;
    }

    .select-options a:hover {
        background-color: #f1f1f1;
        text-decoration: none;
    }

</style>

<h2 class="w-full">ƒål√°nky</h2>

<div class="grid gap-5 lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 mt-5">
    <div class="card-body w-full items-center text-center" style="background-image: url(/static/img/articles/article.webp);
    background-size: 100% 100%;">
        <a href="/clanky/filmy/">
            <img src="/static/img/forum/movie.webp">
            <h3 class="movies">Filmov√© ƒçl√°nky</h3>
        </a>
    </div>

    <div class="card-body w-full items-center text-center" style="background-image: url(/static/img/articles/article.webp);
    background-size: 100% 100%;">
        <a href="/clanky/serialy/">
            <img src="/static/img/forum/serie.webp">
            <h3 class="movies">Seri√°lov√© ƒçl√°nky</h3>
        </a>
    </div>

    <div class="card-body w-full items-center text-center" style="background-image: url(/static/img/articles/article.webp);
    background-size: 100% 100%;">
        <a href="/clanky/knihy/">
            <img src="/static/img/forum/book.webp">
            <h3 class="books">Kni≈æn√≠ ƒçl√°nky</h3>
        </a>
    </div>

    <div class="card-body w-full items-center text-center" style="background-image: url(/static/img/articles/article.webp);
    background-size: 100% 100%;">
        <a href="/clanky/hry/">
            <img src="/static/img/forum/game.webp">
            <h3 class="games">Hern√≠ ƒçl√°nky</h3>
        </a>
    </div>
</div>


<h3 class="mt-10 mb-3">üìå Posledn√≠ ƒçl√°nky</h3>

<section class="my-4 w-3/4">
    {% if latest_articles %}
        {% for art in latest_articles %}
        <ol class="border mb-2">

            <!-- Titulek + typ -->
            <li class="flex justify-between">
                <a class="hover:underline font-semibold" href="/{{ art.url }}">
                    {{ art.title }}
                </a>

                <span class="flex items-center gap-1">
                    {% if art.typ == "Movie" %}
                        <span class="text-red-600">&#127916; Filmy</span>
                    {% elif art.typ == "Book" %}
                        <span class="text-green-700">&#128214; Knihy</span>
                    {% elif art.typ == "Game" %}
                        <span class="text-blue-700">&#127918; Hry</span>
                    {% elif art.typ == "Series" %}
                        <span class="text-purple-700">&#128253; Seri√°ly</span>
                    {% else %}
                        <span class="text-gray-600">&#128172; Ostatn√≠</span>
                    {% endif %}
                </span>
            </li>

            <hr style="width: 98%; margin: 0 auto;">

            <!-- Info -->
            <li>
                <small>
                    {{ art.created|date:"d.m.Y" }}
                </small>

                {% if art.img400x250 %}
                <div class="mt-2">
                    <img src="{{ art.img400x250 }}" alt="{{ art.alt }}" class="w-48 rounded shadow">
                </div>
                {% endif %}

                <p class="mt-1 text-sm text-gray-700 dark:text-gray-300">
                    {{ art.perex|default:art.content|striptags|truncatechars:140 }}
                </p>
            </li>

        </ol>
        {% endfor %}
    {% else %}
        <p>Zat√≠m ≈æ√°dn√© ƒçl√°nky.</p>
    {% endif %}
</section>


<script>
    // Funkce pro zobrazen√≠/skryt√≠ roletov√©ho menu po kliknut√≠ na text "Akce"
    function toggleDropdown(event) {
        var dropdown = document.getElementById('action-dropdown');
        dropdown.style.display = (dropdown.style.display === 'none' || dropdown.style.display === '') ? 'flex' : 'none';
        
        // Zastav√≠me ≈°√≠≈ôen√≠ ud√°losti, abychom zabr√°nili jej√≠mu zachycen√≠ dokumentem
        event.stopPropagation();
    }

    // Funkce pro zav≈ôen√≠ nab√≠dky, pokud u≈æivatel klikne nƒõkam mimo pole
    document.addEventListener('click', function(event) {
        var dropdown = document.getElementById('action-dropdown');
        if (!dropdown.contains(event.target)) {
            dropdown.style.display = 'none';
        }
    });
</script>

{% endblock %}