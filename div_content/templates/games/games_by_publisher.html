{% extends 'games/base.html' %}
{% load i18n %}
{% load ratings %}
{% load static %}

{% block title %}Vydavatelé her | DIV.cz{% endblock %}

{% block meta %}

    <meta property="og:url" content="https://div.cz/hra/{{ publisher.publisherurl }}">

    <style>
        .publisher-games-page {
            margin-top: 1.5rem;
            padding: 0 1rem;
        }

        .page-title {
            margin-bottom: 1.5rem;
        }

        .game-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            margin-left: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .game-item a {
            text-decoration: underline;
        }

        .game-item-empty {
            font-style: italic;
            color: #666;
        }

        .pagination {
            margin-top: 1.5rem;
        }

        .pagination-links {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .pagination-current {
            font-weight: bold;
        }

        @media (max-width: 992px) {
            .game-list {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 576px) {
            .game-list {
                grid-template-columns: 1fr;
            }
        }

    </style>

{% endblock %}

{% block content %}

<div class="container">
    <div class="publisher-games-page">

        <h2 class="page-title">
            Hry od vydavatele: {{ publisher.publisher }}
        </h2>

        <ul class="game-list">
            {% for game in games %}
                <li class="game-item">
                    <a href="{% url 'game_detail' game_url=game.url %}">
                        {{ game.title }}
                    </a>
                    ({{ game.year }})
                </li>

                {% empty %}
                <li class="game-item-empty">
                    Žádné hry nenalezeny.
                </li>
            {% endfor %}
        </ul>

        <hr>

        <!-- PAGINÁTOR -->
        {% if games.has_other_pages %}
            <div class="pagination">
                <div class="pagination-links">

                    {% if games.has_previous %}
                        <a class="pagination-first" href="?page=1">
                            &laquo; První
                        </a>
                        <a href="?page={{ games.previous_page_number }}">
                            Předchozí
                        </a>
                    {% endif %}

                    <span class="pagination-current">
                        {{ games.number }} / {{ games.paginator.num_pages }}
                    </span>

                    {% if games.has_next %}
                        <a href="?page={{ games.next_page_number }}">
                            Další
                        </a>
                        <a class="pagination-last" href="?page={{ games.paginator.num_pages }}">
                            Poslední &raquo;
                        </a>
                    {% endif %}

                </div>
            </div>
        {% endif %}

    </div>
</div>

{% endblock %}
