<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>
    {% block title %}
        DIVkvari치t
    {% endblock %}
    </title>

    {% block meta %}
    <meta name="description" content="Burza knih mezi 캜ten치콏i.">
    {% endblock %}

    {% block head_extra %}{% endblock %}



<!-- 1) Prim치rn칤 Tailwind CDN -->
<script src="https://cdn.tailwindcss.com" onerror="tailwindFallback()"></script>

<!-- 2) Fallback p콏es unpkg -->
    <link rel="stylesheet"
          href="https://unpkg.com/tailwindcss@1.9.6/dist/tailwind.min.css">








    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        
        .book-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1),
                        0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .add-book {
            background-color: #10b981;
            color: white;
            padding: 10px 16px;
            border-radius: 6px;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        .add-book:hover { background-color: #059669; }

        .pagination a {
            padding: 8px 16px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            color: #374151;
        }

        .pagination a:hover { background-color: #f3f4f6; border-color: #9ca3af; }

        .current-page { color: #6b7280; padding: 8px 16px; }

        .alert {
            border-radius: 8px;
            padding: 12px 16px;
            margin: 30px 10px;
        }

        .alert-success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert-error   { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>

<body class="bg-gray-50">

<header class="bg-white shadow-sm">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
        <div class="text-2xl font-bold text-green-700">
            <a href="/">DIVkvariat.cz</a>
        </div>

        <nav class="hidden md:flex space-x-6">
            <a href="/" class="text-gray-700 hover:text-green-600">Dom콢</a>
            <a href="/nabidky/" class="text-gray-700 hover:text-green-600">Knihy</a>
            <a href="/poptavky/" class="text-gray-700 hover:text-green-600">Popt치vky</a>
            <a href="/blog/" class="text-gray-700 hover:text-green-600">Blog</a>
            <a href="/kontakt" class="text-gray-700 hover:text-green-600">Kontakt</a>
        </nav>

        <div class="flex items-center space-x-4">
            <a href="/hledat/" class="text-gray-700 hover:text-green-600">
                <i class="fas fa-search"></i>
            </a>

            {% if request.user.is_authenticated %}
                <a href="/ucet/" class="flex items-center text-gray-700 hover:text-green-600 space-x-1">
                    <i class="fas fa-user-circle"></i>
                    <span class="hidden sm:inline">{{ request.user.username }}</span>
                </a>
                <a href="/odhlaseni/" class="text-red-600 hover:text-red-700 text-sm font-medium">
                    Odhl치sit se
                </a>
            {% else %}
                <a href="/prihlaseni/" class="text-gray-700 hover:text-green-600 text-sm font-medium">
                    P콏ihl치sit
                </a>
                <a href="/registrace/" class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm">
                    Registrace
                </a>
            {% endif %}
        </div>
    </div>
</header>

<main class="container mx-auto px-4 py-6">
    {% block content %}{% endblock %}
</main>



<style>
#chatbox-toggle {
    position: fixed;
    right: 20px;
    bottom: 20px;
    background: #37b24d;
    color: white;
    border-radius: 50%;
    width: 52px;
    height: 52px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    cursor: pointer;
    z-index: 9999;
}

#chatbox-window {
    position: fixed;
    right: 20px;
    bottom: 85px;
    width: 320px;
    height: 420px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 0 12px rgba(0,0,0,0.2);
    display: none;
    flex-direction: column;
    z-index: 9999;
}

#chatbox-messages {
    padding: 10px;
    height: 340px;
    overflow-y: auto;
    font-size: 14px;
}

#chatbox-input {
    display: flex;
    border-top: 1px solid #ddd;
}
#chatbox-input input {
    flex: 1;
    padding: 8px;
    border: none;
}
#chatbox-input button {
    padding: 8px 12px;
    background: #37b24d;
    color: white;
    border: none;
}
</style>

<div id="chatbox-toggle">游눫</div>

<div id="chatbox-window">
    <div id="chatbox-messages">
        {% if user.is_authenticated %}
            <div><strong>Ahoj {{ user.username }}</strong> 游녦 Co bys dnes r치d?</div>
        {% else %}
            <div>游닄 Ahoj! Pro plnou podporu se pros칤m p콏ihlas.</div>
        {% endif %}
    </div>

    <div id="chatbox-input">
        <input id="chatbox-text" type="text" placeholder="Napi코 zpr치vu...">
        <button onclick="chatSend()">俱뫮잺</button>
    </div>
</div>

<script>
document.getElementById("chatbox-toggle").onclick = function () {
    let box = document.getElementById("chatbox-window");
    box.style.display = (box.style.display === "flex") ? "none" : "flex";
};

async function chatSend() {
    const input = document.getElementById("chatbox-text");
    const msg = input.value.trim();
    if (!msg) return;

    addMessage("Ty", msg);
    input.value = "";

    const res = await fetch("/api/chatbot/", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ message: msg })
    });

    const data = await res.json();
    addMessage("Asistent", data.reply);
}

function addMessage(sender, text) {
    const box = document.getElementById("chatbox-messages");
    box.innerHTML += `<div><strong>${sender}:</strong> ${text}</div>`;
    box.scrollTop = box.scrollHeight;
}
</script>




<footer class="bg-gray-800 text-white mt-12 py-8">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <h3 class="text-lg font-bold mb-4">DIVkvari치t</h3>
                <p class="text-gray-400">
                    Burza knih mezi 캜ten치콏i. Prodej, koup캩 i darov치n칤 knih.
                </p>
            </div>

            <div>
                <h3 class="text-lg font-bold mb-4">Rychl칠 odkazy</h3>
                <ul class="space-y-2 text-gray-400">
                    <li><a href="/" class="hover:text-white">Dom콢</a></li>
                    <li><a href="/nabidky/" class="hover:text-white">V코echny knihy</a></li>
                    <li><a href="/pridat-knihu/" class="hover:text-white">P콏idat knihu</a></li>
                </ul>
            </div>

            <div>
                <h3 class="text-lg font-bold mb-4">Podpora</h3>
                <ul class="space-y-2 text-gray-400">
                    <li><a href="/kontakt/" class="hover:text-white">Kontakt</a></li>
                    <li><a href="/podminky/" class="hover:text-white">Obchodn칤 podm칤nky</a></li>
                    <li><a href="/ochrana-osobnich-udaju/" class="hover:text-white">Ochrana osobn칤ch 칰daj콢</a></li>
                </ul>
            </div>

            <div>
                <h3 class="text-lg font-bold mb-4">Sledujte n치s</h3>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
        </div>

        <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
            <p>&copy; 2025 DIVkvari치t.cz</p>
        </div>
    </div>
</footer>

</body>
</html>
