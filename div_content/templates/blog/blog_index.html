{% extends "blog/base.html" %}

{% block title %}
Blog Div.cz | Diskuzn√≠ f√≥rum
{% endblock title %}

{% block content %}

<link href="https://media.div.cz/css/navbar_together.css" rel="stylesheet">

<h2 class="w-full">Blogy{% if user.is_authenticated %}<small style="font-size:60%;"> / <a href="https://test.div.cz/blog/">M≈Øj blog</a></small>{% endif %}</h2>


<div class="grid gap-5 lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 mt-5">
    <div class="card-body" style="background-image: url(https://div.cz/static/img/site/blogy.webp);
    background-size: 100% 100%;">
        <a href="{% url 'blog_section_detail' section='filmove' %}">
            <img src="/static/img/forum/movie.webp">
            <h3 class="movies">Filmov√© blogy</h3>
        </a>
    </div>

    <div class="card-body" style="background-image: url(https://div.cz/static/img/site/blogy.webp);
    background-size: 100% 100%;">
        <a href="{% url 'blog_section_detail' section='knizni' %}">
            <img src="/static/img/forum/book.webp">
            <h3 class="books">Kni≈æn√≠ blogy</h3>
        </a>
    </div>

    <div class="card-body" style="background-image: url(https://div.cz/static/img/site/blogy.webp);
    background-size: 100% 100%;">
        <a href="{% url 'blog_section_detail' section='herni' %}">
            <img src="/static/img/forum/game.webp">
            <h3 class="games">Hern√≠ blogy</h3>
        </a>
    </div>

    <div class="card-body" style="background-image: url(https://div.cz/static/img/site/blogy.webp);
    background-size: 100% 100%;">
        <a href="{% url 'blog_section_detail' section='obecne' %}">
            <img src="/static/img/forum/other.webp">
            <h3>Obecn√© blogy</h3>
        </a>
    </div>
</div>

<!-- Posledn√≠ p≈ô√≠spƒõvky -->
<h3 class="mt-10 mb-3">üìå Posledn√≠ p≈ô√≠spƒõvky</h3>

<section class="my-4 w-3/4">
    {% if latest_posts %}
        {% for post in latest_posts %}
        <ol class="border mb-2">
            <!-- Titulek p≈ô√≠spƒõvku -->
            <li class="flex justify-between">
                <a class="hover:underline font-semibold" 
                   href="{% url 'blog_post_detail' blog_slug=post.articleblog.slug post_slug=post.slug %}">
                    {{ post.title }}
                </a>
                <span class="flex items-center gap-1">
                    {% if post.articleblog.blog_type == "movie" %}
                        <span class="text-red-600">&#127916; Filmy</span>
                    {% elif post.articleblog.blog_type == "book" %}
                        <span class="text-green-700">&#128214; Knihy</span>
                    {% elif post.articleblog.blog_type == "game" %}
                        <span class="text-blue-700">&#127918; Hry</span>
                    {% else %}
                        <span class="text-gray-600">&#128172; Obecn√©</span>
                    {% endif %}
                </span>
            </li>
            <hr style="width: 98%; margin: 0 auto;">
            <!-- Info -->
            <li>
                <small>
                    <strong>{{ post.user.username|default:"Smazan√Ω u≈æivatel" }}</strong> ¬∑ 
                    {{ post.published_at|date:"d.m.Y H:i" }}
                </small>
                <p class="mt-1 text-sm text-gray-700 dark:text-gray-300">
                    {{ post.content|striptags|truncatechars:120 }}
                </p>
            </li>
        </ol>
        {% endfor %}
    {% else %}
        <p>Zat√≠m ≈æ√°dn√© p≈ô√≠spƒõvky.</p>
    {% endif %}
</section>


{% endblock content %}