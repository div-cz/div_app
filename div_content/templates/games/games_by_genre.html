{% extends 'games/base.html' %}
{% load i18n %}
{% load ratings %}
{% load static %}

{% block title %}Hry v žánru | DIV.cz{% endblock %}

{% block meta %}
    <style>
        .rating {
            position: relative;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-top: 0;
            margin-right: 0;
            padding: 0;
            box-shadow: 0px 8px 16px rgb(147 147 147);
        }

        .rating::before {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 44px;
            height: 44px;
            background: #444444;
            border-radius: 50%;
            z-index: 2;
            margin: 0;
        }

        .rating::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 50px;
            height: 50px;
            background: conic-gradient(
                var(--gradient-color, #0a0) 0%,
                var(--gradient-color, #0a0) var(--gradient-value, 50%),
                #777777 var(--gradient-value, 50%)
            );
            border-radius: 50%;
            z-index: 1;
            margin: 0;
        }

        .rating-inner {
            position: relative;
            z-index: 3;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            /* margin-top: 10px;
            margin-right: -10px; */
        }

        .rating-inner span {
            font-size: 10px;
            margin-left: 2px;
            color: #ffd700;
        }

        .rating:is(.dark *) {
            box-shadow: none;
        }

        .title-rating {
            display: flex; 
            justify-content: end; 
            width: 100%; 
            /* margin-top: -50px; */
        }

    </style>
{% endblock %}

{% block content %}

<div class="container">
    <h2>Hry v žánru: {{ genre.genrenamecz }}</h2>
    <div class="row">
        <!-- LEVÁ STRANA -->
        <div class="left-side">
            <!-- Seznam seriálů -->
            <div class="game-list-wrapper">
                {% for gamegenre in games %}
                    <div class="game-card-item">
                        <a href="/hra/{{ game.url }}" style="width: 130px;">
                            {% if game.img %}
                                {% if game.img == "rawg.io" %}
                                    <img src="https://rawg.io/ ... ... .../{{ game.img }}" alt="{{ game.title }}" class="game-card-image">
                                {% else %}
                                    <img src="https://media.div.cz/hry/{{ game.img }}" alt="{{ game.title }}" class="game-card-image">
                                {% endif %}
                            {% else %}
                                <img src="/static/img/game/game.png" alt="{{ game.title }}" class="game-card-image">
                            {% endif %}
                        </a>

                        <div class="card-body" style="width: min-content;">
                            <div class="card-header">
                                <h4 class="card-title">
                                    <a href="{% url 'game_detail' game_url=gamegenre.gameid.url %}">
                                        {{ gamegenre.gameid.titlecz }}
                                    </a>
                                </h4>
                           
                                <!-- hodnocení -->
                                <div class="title-rating">
                                    <div class="rating" data-rating="{{ game.average_rating }}">
                                        <div class="rating-inner">
                                            {{ game.average_rating }}%
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <p class="card-text">{{ game.descriptioncz|safe }}</p>
                        </div>
                    </div>
                {% endfor %}

                <!-- PAGINÁTOR -->
                {% if games.has_other_pages %}
                    <div class="pagination">
                        <span class="step-links">
                            {% if games.has_previous %}
                                <a class="first-page" href="?page=1">&laquo; První</a>
                                <a href="?page={{ games.previous_page_number }}">Předchozí</a>
                            {% endif %}

                            <span class="current-page">
                                {{ games.number }} / {{ games.paginator.num_pages }}
                            </span>

                            {% if games.has_next %}
                                <a href="?page={{ games.next_page_number }}">Další</a>
                                <a class="last-page" href="?page={{ games.paginator.num_pages }}">Poslední &raquo;</a>
                            {% endif %}
                        </span>
                    </div>
                {% endif %}

            </div>
        </div>

        <!-- PRAVÁ STRANA -->
        <div class="right-side">
            <!-- ŽÁNRY -->
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title after-h3">Žánry</h3>
                    <div>
                        <a href="/hry/zanr/akcni">Akční</a> |
                        <a href="/hry/zanr/dobrodruzny">Dobrodružný</a> |
                        <!--<a href="/hry/zanr/detske">Dětské</a> |-->
                        <a href="/hry/zanr/horor">Horor</a> |
                        <a href="/hry/zanr/indie">Indie</a> |
                        <a href="/hry/zanr/hudebni">Hudební</a> |
                        <!--<a href="/hry/zanr/logicke">Logické</a> |-->
                        <a href="/hry/zanr/moba">MOBA</a> |
                        <!--<a href="/hry/zanr/online">Online</a> |-->
                        <a href="/hry/zanr/rpg">RPG</a> |
                        <!---->
                        <a href="/hry/zanr/simulace">Simulátory</a> |
                        <a href="/hry/zanr/sportovni">Sportovní</a> |
                        <a href="/hry/zanr/strategie">Strategie</a> |
                        <a href="/hry/zanr/strilecka">Střílečka</a> |
                        <a href="/hry/zanr/zavodni">Závodní</a> 
                    </div>
                </div>
            </div>

            <!-- ROKY -->
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title after-h3">Roky</h3>
                    <div>
                        <a href="/serialy/2024">2024</a> |
                        <a href="/serialy/2023">2023</a> |
                        <a href="/serialy/2022">2022</a> |
                        <a href="/serialy/2021">2021</a> |
                        <a href="/serialy/2020">2020</a> |
                        <a href="/serialy/2019">2019</a> |
                        <a href="/serialy/2018">2018</a> |
                        <a href="/serialy/2017">2017</a> |
                        <a href="/serialy/2016">2016</a> |
                        <a href="/serialy/2015">2015</a> |
                        <a href="/serialy/2014">2014</a> |
                        <a href="/serialy/2013">2013</a> |
                        <a href="/serialy/2012">2012</a> |
                        <a href="/serialy/2011">2011</a> |
                        <a href="/serialy/2010">2010</a> |
                        <a href="/serialy/2009">2009</a> |
                        <a href="/serialy/2008">2008</a> |
                        <a href="/serialy/2007">2007</a> |
                        <a href="/serialy/2006">2006</a> |
                        <a href="/serialy/2005">2005</a> |
                        <a href="/serialy/2004">2004</a> |
                        <a href="/serialy/2003">2003</a> |
                        <a href="/serialy/2002">2002</a> |
                        <a href="/serialy/2001">2001</a> |
                        <a href="/serialy/2000">2000</a> |
                        <a href="/serialy/1999">1999</a>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

{% endblock %}
