{% extends "series/base.html" %}
{% load humanize %}
{% load i18n %}
{% load ratings %}
{% load static %}

{% block title %}Seznam seriálů TEST| DIV.cz{% endblock %}

{% block meta %}
    <style>
        .rating-list {
            position: relative;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-top: 0;
            margin-right: 0;
            padding: 0;
            box-shadow: 0px 8px 16px rgb(147 147 147);
        }

        .rating-list::before {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 44px;
            height: 44px;
            background: #444444;
            border-radius: 50%;
            z-index: 2;
            margin: 0;
        }

        .rating-list::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 50px;
            height: 50px;
            background: conic-gradient(
                var(--gradient-color, #0a0) 0%,
                var(--gradient-color, #0a0) var(--gradient-value, 50%),
                #777777 var(--gradient-value, 50%)
            );
            border-radius: 50%;
            z-index: 1;
            margin: 0;
        }

        .rating-list-inner {
            position: relative;
            z-index: 3;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            /* margin-top: 10px;
            margin-right: -10px; */
        }

        .rating-list-inner span {
            font-size: 10px;
            margin-left: 2px;
            color: #ffd700;
        }

        .rating-list:is(.dark *) {
            box-shadow: none;
        }
        
        .title-rating-list {
            display: flex; 
            justify-content: end; 
            width: 100%; 
            margin-top: -50px;
        }

    </style>
{% endblock %}

{% block content %}

<div class="container">
    <!-- LEVÁ STRANA -->
    <div class="left-side">
        <!-- carousel - nejlépe hodnocené -->
        <div id="image-slider" class="carousel box-shadow">
            
            <div class="carousel-slide">
                <a href="/serialy/">
                    <img src="https://www.themoviedb.org/t/p/w1066_and_h600_bestv2/ogmhmHVMRdZ4kRmdm0XiHY7OkIK.jpg" alt="Serialy">
                </a>
                <div class="overlay">
                    <h2>Seriály</h2>
                </div>
            </div>
                
        </div>

        <!-- generování seriálů -->
        <div class="genre-list" style="margin-bottom: 1rem;">
            {% for tvshow in tvshows_list %}
                <div class="card">
                    <img src="{% if tvshow.img != 'noimg.png' %}https://www.themoviedb.org/t/p/w533_and_h300_bestv2{{ tvshow.img }}{% else %}/static/img/nomovie_400.jpg{% endif %}" alt="{{ tvshow.titlecz }}" style="border-radius: .5rem .5rem 0 0;">

                    <div class="card-body" style="border-radius: 0 0 .5rem .5rem !important;">
                        <!-- hodnocení -->
                        <div class="title-rating-list">
                            <div class="rating-list" data-rating="{{ tvshow.average_rating }}">
                                <div class="rating-list-inner">
                                    {{ tvshow.average_rating }}%
                                </div>
                            </div>
                        </div>
                        
                        <h4 class="card-title">
                            <a href="/serial/{{ tvshow.url }}">{{ tvshow.titlecz }}</a>
                        </h4>
                        <p class="card-text">{{ tvshow.description }}</p>
                    </div>
                </div>
            {% endfor %}
        </div>

        <!-- Poslední seriálové recenze -->
        <div class="card">
            <div class="card-body">
                <div class="card-title after-h3">
                    <h3>&#128221;&#65039; Poslední seriálové recenze</h3>
                </div>

                {% if latest_comments %}
                    {% for comment in latest_comments %}  
                        <div class="last-review"> 
                            {% if comment.tvshowkid.imgposter == "noimg.png" %}
                                <img src="/static/img/movie/w200/nomovie.jpg" alt="{{ comment.tvshowkid.titlecz }}" class="img-fluid" style="object-fit: cover; max-width: 100px; margin-right: .5rem;">
                                {% else %}
                                <img src="https://image.tmdb.org/t/p/w300_and_h450_bestv2/{{ comment.tvshowkid.imgposter }}" alt="{{ comment.tvshowkid.titlecz }}" class="img-fluid" style="object-fit: cover; max-width: 100px; margin-right: .5rem;">
                            {% endif %}
                
                            <div class="last-review-body">
                                <div class="last-review-title">
                                    <a href="{% url 'serie_detail'  comment.tvshowkid.url  %}">{{ comment.tvshowkid.titlecz }}</a>
                                    <p class="last-review-text">{{ comment.comment }}</p>
                                </div>
                                
                                <div class="last-review-user"> 
                                    <p>Uživatel:
                                        {% if comment.user %}
                                            <a href="/uzivatel/{{ comment.user.id }}/">{{ comment.user.username }}</a>
                                        {% endif %}  
                                    </p>
                                    <span style="margin-left: .25rem;">{{ comment.dateadded|date:"d.m.Y H:i" }}</span>
                                </div>
                            </div>  
                        </div>  

                        {% if not forloop.last %}
                            <hr style="margin: .75rem 0;">
                        {% endif %}
                    {% endfor %}

                    {% else %}
                    <p>Zatím žádné recenze od komunity.</p>
                {% endif %}
            </div>
        </div>    
    </div>

    <!-- PRAVÁ STRANA -->
    <div class="right-side">

        <!-- Nejnovější sezóny -->
        <div class="card">
            <div class="card-body">
                <h3 class="card-title after-h3">&#127381; Nové sezóny</h3>
                <ul style="list-style-type:none; width: 100%;">
                    {% for season in latest_seasons %}
                        <li class="after last-line">
                            <a href="{% url 'serie_season' tv_url=season.tvshowid.url seasonurl=season.seasonurl %}">
                                {{ season.tvshowid.titlecz }}: S{{ season.seasonnumber|stringformat:"02d" }}
                            </a>
                            <p><small>(premiéra {{ season.premieredate|date:"j.n.Y" }})</small></p>
                        </li>
                        {% empty %}
                        <li>Žádné nové sezóny k dispozici</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- ČLÁNKY -->
        <div class="card">
            <div class="card-body">
                <div class="card-title after-h3">
                    <h3>&#128240;&#65039; Články</h3>
                    <a href="{% url 'articles_list' category='serialy' %}"><small>Zobrazit vše</small></a>
                </div>
                <div class="article-head-title after">
                    <a href="https://div.cz/serialy/2025">Seriály roku 2025</a>
                    <a href="https://div.cz/serialy/2024">Seriály roku 2024</a>
                    <a href="https://div.cz/serialy/2023">Seriály roku 2023</a>
                    <a href="https://div.cz/duna-proroctvi-novy-tv-spin-off">Duna: Proroctví</a>
                    <a href="https://div.cz/rod-draka-2-serialova-recenze">Rok draka 2: recenze</a>
                </div>
                <div class="text-right">
                    {% if user.is_superuser %}
                        <a href="{% url 'article_new' category=category_key %}"><i class="fa-solid fa-plus"></i> Přidat nový článek</a>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- ŽÁNRY -->
        <div class="card">
            <div class="card-body">
                <h3 class="card-title after-h3">&#127917; Žánry</h3>
                <div>
                    <a href="/serialy/akcni">Akční</a> |
                    <a href="/serialy/animovany">Animovaný</a> |
                    <a href="/serialy/dobrodruzny">Dobrodružný</a> |
                    <a href="/serialy/dokumentarni">Dokumentární</a> |
                    <a href="/serialy/drama">Drama</a> |
                    <a href="/serialy/fantasy">Fantasy</a> |
                    <a href="/serialy/historicky">Historický</a> |
                    <a href="/serialy/horor">Horor</a> |
                    <a href="/serialy/hudebni">Hudební</a> |
                    <a href="/serialy/komedie">Komedie</a> |
                    <a href="/serialy/krimi">Krimi</a> |
                    <a href="/serialy/mysteriozni">Mysteriózní</a> |
                    <a href="/serialy/rodinny">Rodinný</a> |
                    <a href="/serialy/romanticky">Romantický</a> |
                    <a href="/serialy/sci-fi">Sci-fi</a> |
                    <a href="/serialy/thriller">Thriller</a> |
                    <a href="/serialy/valecny">Válečný</a> |
                    <a href="/serialy/western">Western</a>
                </div>
            </div>
        </div>

        <!-- ROKY -->
        <div class="card">
            <div class="card-body">
                <h3 class="card-title after-h3">&#128467;&#65039; Roky</h3>
                <div>
                    <a href="/serialy/2024">2024</a> |
                    <a href="/serialy/2023">2023</a> |
                    <a href="/serialy/2022">2022</a> |
                    <a href="/serialy/2021">2021</a> |
                    <a href="/serialy/2020">2020</a> |
                    <a href="/serialy/2019">2019</a> |
                    <a href="/serialy/2018">2018</a> |
                    <a href="/serialy/2017">2017</a> |
                    <a href="/serialy/2016">2016</a> |
                    <a href="/serialy/2015">2015</a> |
                    <a href="/serialy/2014">2014</a> |
                    <a href="/serialy/2013">2013</a> |
                    <a href="/serialy/2012">2012</a> |
                    <a href="/serialy/2011">2011</a> |
                    <a href="/serialy/2010">2010</a> |
                    <a href="/serialy/2009">2009</a> |
                    <a href="/serialy/2008">2008</a> |
                    <a href="/serialy/2007">2007</a> |
                    <a href="/serialy/2006">2006</a> |
                    <a href="/serialy/2005">2005</a> |
                    <a href="/serialy/2004">2004</a> |
                    <a href="/serialy/2003">2003</a> |
                    <a href="/serialy/2002">2002</a> |
                    <a href="/serialy/2001">2001</a> 
                    
                    <details>
                        <summary>Další roky</summary>
                        <a href="/serialy/2000">2000</a> |
                        <a href="/serialy/1999">1999</a> |
                        <a href="/serialy/1998">1998</a> |
                        <a href="/serialy/1997">1997</a> |
                        <a href="/serialy/1996">1996</a> |
                        <a href="/serialy/1995">1995</a> |
                        <a href="/serialy/1994">1994</a> |
                        <a href="/serialy/1993">1993</a> |
                        <a href="/serialy/1992">1992</a> |
                        <a href="/serialy/1991">1991</a> |
                        <a href="/serialy/1990">1990</a> |
                        <a href="/serialy/1989">1989</a> |
                        <a href="/serialy/1988">1988</a> |
                        <a href="/serialy/1987">1987</a> |
                        <a href="/serialy/1986">1986</a> |
                        <a href="/serialy/1985">1985</a> |
                        <a href="/serialy/1984">1984</a> |
                        <a href="/serialy/1983">1983</a> |
                        <a href="/serialy/1982">1982</a> |
                        <a href="/serialy/1981">1981</a> |
                        <a href="/serialy/1980">1980</a> |
                        <a href="/serialy/1979">1979</a> |
                        <a href="/serialy/1978">1978</a> |
                        <a href="/serialy/1977">1977</a> |
                        <a href="/serialy/1976">1976</a> |
                        <a href="/serialy/1975">1975</a> |
                        <a href="/serialy/1974">1974</a> |
                        <a href="/serialy/1973">1973</a> |
                        <a href="/serialy/1972">1972</a> |
                        <a href="/serialy/1971">1971</a> |
                        <a href="/serialy/1970">1970</a> |
                        <a href="/serialy/1969">1969</a> |
                        <a href="/serialy/1968">1968</a> |
                        <a href="/serialy/1967">1967</a> |
                        <a href="/serialy/1966">1966</a> |
                        <a href="/serialy/1965">1965</a> |
                        <a href="/serialy/1964">1964</a> |
                        <a href="/serialy/1963">1963</a> |
                        <a href="/serialy/1962">1962</a> |
                        <a href="/serialy/1961">1961</a> |
                        <a href="/serialy/1960">1960</a> |
                        <a href="/serialy/1959">1959</a> |
                        <a href="/serialy/1958">1958</a> |
                        <a href="/serialy/1957">1957</a> |
                        <a href="/serialy/1956">1956</a> |
                        <a href="/serialy/1955">1955</a> |
                        <a href="/serialy/1954">1954</a> |
                        <a href="/serialy/1953">1953</a> |
                        <a href="/serialy/1952">1952</a> |
                        <a href="/serialy/1951">1951</a> |
                        <a href="/serialy/1950">1950</a> |
                        <a href="/serialy/1949">1949</a> |
                        <a href="/serialy/1948">1948</a> |
                        <a href="/serialy/1947">1947</a> |
                        <a href="/serialy/1946">1946</a> |
                        <a href="/serialy/1945">1945</a> |
                        <a href="/serialy/1944">1944</a> |
                        <a href="/serialy/1943">1943</a> |
                        <a href="/serialy/1942">1942</a> |
                        <a href="/serialy/1941">1941</a> |
                        <a href="/serialy/1940">1940</a> |
                        <a href="/serialy/1939">1939</a> |
                        <a href="/serialy/1938">1938</a> |
                        <a href="/serialy/1937">1937</a> |
                        <a href="/serialy/1936">1936</a> |
                        <a href="/serialy/1935">1935</a> |
                        <a href="/serialy/1934">1934</a> |
                        <a href="/serialy/1933">1933</a> |
                        <a href="/serialy/1932">1932</a> |
                        <a href="/serialy/1931">1931</a> |
                        <a href="/serialy/1930">1930</a> |
                        <a href="/serialy/1929">1929</a> |
                        <a href="/serialy/1928">1928</a> |
                        <a href="/serialy/1927">1927</a> 
                    </details>
                </div>
            </div>
        </div>

        <!-- STATISTIKY -->
        <div class="card">
            <div class="card-body">
                <h3 class="card-title after-h3">&#128202;&#65039; Seriálové statistiky DIV</h3>
                <ul>
                    <li>{{ stats_tvshows.value|intcomma }} seriálů</li>
                    <li> sezón</li>
                    <li> dílů</li>
                </ul>
            </div>
        </div>

    </div>
</div>
            
{% endblock %}