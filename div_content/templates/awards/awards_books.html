{% extends "awards/base.html" %}
{% load static %}

{% block title %}Knižní ocenění - DIV.cz{% endblock %}

{% block meta %}

    <link href="/web/css/books.css" rel="stylesheet">

{% endblock %}


{% block content %}

    <h2 style="width: 100%;">
        <a class="hover:underline" href="{% url 'awards_index' %}">Ocenění</a>
        <span> / </span>
        Knižní ocenění
    </h2>

    <p class="text-muted">Přehled všech nominovaných knih a vítězů podle jednotlivých ocenění.</p>

    <div class="row" style="margin-top: 1rem;">
        <div class="right-side">
            <div class="card card-body">
                {% for award_name, years in sidebar_awards.items %}
                    <div class="award-block">
                        <h3 class="card-title after-h3">&#127942;{{ award_name }}</h3>

                        {% for y in years %}
                            <div style="width: 100%;">
                                <a href="{% url 'award_detail' y.slug y.year %}" class="list-group-item list-group-item-action small">
                                    {{ y.year }}
                                </a>
                                {% if y.count %}
                                    ({{ y.count }})
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                {% endfor %}

                <div class="award-controls">
                    {% if not winners_only %}
                        <a href="?winners_only=1" class="btn add-other">&#127942; Pouze vítězové</a>
                    {% endif %}

                    {% if winners_only %}
                        <a href="{% url 'awards_books' %}" class="btn add-other">Zobrazit vše</a>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="left-side">
            {% if grouped_awards %}
                {% for awardname, items in grouped_awards.items %}
                    <div class="card card-body">
                        <h3 style="text-align:center" class="after">&#127942; {{ awardname }}</h3>
                        {% if items %}
                            <div class="award-list">
                                {% for item in items %}
                                    <div class="award-entry">
                                        <div class="award-title-row">
                                            <a href="{% url 'book_detail' item.bookid.url %}" class="award-title">
                                                {{ item.bookid.titlecz|default:item.bookid.title }}
                                            </a>
                                            <span class="award-author">– {{ item.bookid.author }}</span>
                                        </div>

                                        <div class="award-meta-row">
                                            <span class="award-year">{{ item.metaAwardid.year }}</span>

                                            {% if item.winner %}
                                                <span class="award-status winner">&#127942; Vítěz</span>
                                            {% else %}
                                                <span class="award-status nomination">&#10024; Nominace</span>
                                            {% endif %}

                                            <a href="" class="award-detail">Detail</a>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>

                            {% else %}
                            <div class="alert">Toto ocenění zatím nemá žádné nominace.
                                {% if user.is_staff %} 
                                    <a href="{% url 'admin_award_nominees' item.metaAwardid.metaawardid %}">Přidat</a>
                                {% endif %}
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
                
                {% else %}
                <div class="alert">Žádná knižní ocenění nenalezena.</div>
            {% endif %}
        </div>
    </div>


{% endblock %}