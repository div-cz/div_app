{% extends "divkvariat/base.html" %}
{% load humanize %}

{% block title %}Nab√≠dky nov√Ωch knih | DIVkvari√°t{% endblock %}

{% block meta %}
<meta name="description" content="Aktu√°ln√≠ nab√≠dky nov√Ωch knih od ƒçten√°≈ô≈Ø na DIVkvari√°tu. Prodej, darov√°n√≠ a v√Ωmƒõny.">
<link rel="canonical" href="https://divkvariat.cz/nove-knihy/">

<meta property="og:title" content="Nab√≠dky knih | DIVkvari√°t">
<meta property="og:description" content="Prodej knih z druh√© ruky. Pod√≠vejte se na aktu√°ln√≠ nab√≠dky ƒçten√°≈ô≈Ø.">
<meta property="og:image" content="https://media.div.cz/hero/nove-knihy-div.webp">
<meta property="og:url" content="https://divkvariat.cz/nove-knihy/">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Nab√≠dky knih | DIVkvari√°t">
<meta name="twitter:description" content="Aktu√°ln√≠ nab√≠dky knih v antikvari√°tu DIVkvari√°t.">
<meta name="twitter:image" content="https://media.div.cz/hero/nove-knihy-div.webp">
{% endblock %}

{% block content %}

<div class="mx-auto max-w-7xl px-4 py-10">

<!-- NAVIGACE / BREADCRUMB -->
<div class="mt-2 mb-3 text-sm text-gray-500">
    <a href="/"
       class="text-green-700 hover:underline">DIVkvari√°t</a>

        <span class="mx-2">/</span>
        <a href="/nabidky/"
           class="text-green-700 hover:underline">
            Nab√≠dky
        </a>
        <span class="mx-2">/</span>
    <!-- SEKCE -->
    <span class="text-gray-600">Nov√© knihy</span>

</div>

    <h1 class="text-3xl font-bold text-gray-900 mb-2">üì¶ Nov√© knihy za cenu star√Ωch</h1>
    <p class="text-gray-600 mb-10">
        Nevhodn√© d√°rky, vyprodej sklad≈Ø, dvojit√© n√°kupy.<br> 
        <strong>Stav NOV√â, cena bazarov√°.</strong><br>
        U≈°et≈ôete ‚Äì a nikdo to nepozn√°.
    </p>

<!-- üîπ TOP PRODEJCI -->
{% if top_sellers %}
<div class="mb-12">
    <h2 class="text-xl font-semibold mb-3">Top prodejci</h2>

    <div class="flex flex-wrap gap-4">

        {% for seller in top_sellers %}
        <a href="/uzivatel/{{ seller.id }}/prodam-knihy/"
           class="px-4 py-3 rounded-lg border bg-white text-gray-800 shadow-sm hover:shadow-md
                  {% if forloop.counter > 2 %} hidden md:inline-flex {% endif %}">
            üì¶ {{ seller.username }}
            <span class="text-sm text-gray-500 ml-1">
                ({{ seller.total_sales }} nab√≠dek)
            </span>
        </a>

        {% endfor %}

    </div>

    <a href="#"
       onclick="this.previousElementSibling.querySelectorAll('.hidden').forEach(x => x.classList.remove('hidden')); this.remove();"
       class="md:hidden mt-3 inline-block text-green-700 underline">
        Zobrazit v≈°echny
    </a>
</div>
{% endif %}






    <!-- üîπ LIST NAB√çDEK -->
    {% if listings %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

        {% for listing in listings %}
        <div class="bg-white border rounded-xl shadow-sm hover:shadow-lg p-4 transition flex flex-col h-full">

            <!-- Obr√°zek -->
            <a href="{% url 'listing_detail_sell' listing.book.url listing.booklistingid %}">
                {% if listing.book.img == "noimg.png" %}
                    <img src="https://media.div.cz/img/book/book.png"
                         class="w-full object-cover rounded-md mb-4"
                         style="aspect-ratio: 1.618/1;">
                {% elif listing.book.img == "GoogleID" %}
                    <img src="https://books.google.com/books/content?id={{ listing.book.googleid }}&printsec=frontcover&img=1&zoom=1"
                         class="w-full object-cover rounded-md mb-4"
                         style="aspect-ratio: 1.618/1;">
                {% else %}
                    <img src="https://media.div.cz/knihy/{{ listing.book.img }}"
                         class="w-full object-cover rounded-md mb-4"
                         style="aspect-ratio: 1.618/1;">
                {% endif %}
            </a>

            <!-- N√°zev -->
            <h3 class="text-lg font-semibold text-gray-800">
                {{ listing.book.titlecz|default:listing.book.title }}
            </h3>

            <!-- Autor -->
            <p class="text-gray-500 mb-3">{{ listing.book.author }}</p>

<span class="inline-block text-xs px-2 py-1 rounded bg-green-100 text-green-800 mb-2">
    Stav: NOV√Å
</span>

            <!-- Cena -->
            <p class="text-xl font-bold mb-4
                {% if listing.price %}
                    text-green-600
                {% else %}
                    text-blue-600
                {% endif %}">
                {% if listing.price %}
                    {{ listing.price|floatformat:0 }} Kƒç
                {% else %}
                    Daruji
                {% endif %}
            </p>

            <!-- Detail Tlaƒç√≠tko -->
            <a href="{% url 'listing_detail_sell' listing.book.url listing.booklistingid %}"
               class="mt-auto block w-full text-center py-2 bg-green-600 hover:bg-green-700 rounded-lg text-white font-semibold">
                Detail nab√≠dky
            </a>

        </div>
        {% endfor %}

    </div>

    <!-- üîπ PAGINACE -->
    <div class="flex justify-center mt-10">

        <nav class="flex items-center space-x-2">

            {% if listings.has_previous %}
                <a href="?page=1{% if selected_genre %}&zanr={{ selected_genre }}{% endif %}"
                   class="px-3 py-2 bg-white border rounded-lg shadow-sm hover:bg-gray-50">¬´ Prvn√≠</a>

                <a href="?page={{ listings.previous_page_number }}{% if selected_genre %}&zanr={{ selected_genre }}{% endif %}"
                   class="px-3 py-2 bg-white border rounded-lg shadow-sm hover:bg-gray-50">‚Äπ</a>
            {% endif %}

            <span class="px-4 py-2 bg-gray-100 border rounded-lg">
                Str√°nka {{ listings.number }} / {{ listings.paginator.num_pages }}
            </span>

            {% if listings.has_next %}
                <a href="?page={{ listings.next_page_number }}{% if selected_genre %}&zanr={{ selected_genre }}{% endif %}"
                   class="px-3 py-2 bg-white border rounded-lg shadow-sm hover:bg-gray-50">‚Ä∫</a>

                <a href="?page={{ listings.paginator.num_pages }}{% if selected_genre %}&zanr={{ selected_genre }}{% endif %}"
                   class="px-3 py-2 bg-white border rounded-lg shadow-sm hover:bg-gray-50">Posledn√≠ ¬ª</a>
            {% endif %}

        </nav>

    </div>

    {% else %}
    <p class="text-center text-gray-500 mt-14">Moment√°lnƒõ zde nejsou ≈æ√°dn√© nab√≠dky.</p>
    {% endif %}

</div>

{% endblock %}
