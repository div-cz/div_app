{% extends "movies/base.html" %}
{% load i18n %}
{% load ratings %}
{% load static %}

{% block title %}{{ movie.titlecz }} ({{ genre.genrenamecz }}) | DIV.cz{% endblock %}

{% block meta %}
    <style>
        .rating {
            position: relative;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-top: 0;
            margin-right: 0;
            padding: 0;
            box-shadow: 0px 8px 16px rgb(147 147 147);
        }

        .rating::before {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 44px;
            height: 44px;
            background: #444444;
            border-radius: 50%;
            z-index: 2;
            margin: 0;
        }

        .rating::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 50px;
            height: 50px;
            background: conic-gradient(
                var(--gradient-color, #0a0) 0%,
                var(--gradient-color, #0a0) var(--gradient-value, 50%),
                #777777 var(--gradient-value, 50%)
            );
            border-radius: 50%;
            z-index: 1;
            margin: 0;
        }

        .rating-inner {
            position: relative;
            z-index: 3;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            /* margin-top: 10px;
            margin-right: -10px; */
        }

        .rating-inner span {
            font-size: 10px;
            margin-left: 2px;
            color: #ffd700;
        }

        .rating:is(.dark *) {
            box-shadow: none;
        }

        .title-rating {
            display: flex; 
            justify-content: end; 
            width: 100%; 
            margin-top: -50px;
        }

    </style>
{% endblock %}

{% block content %}
        
<div class="container">
    <h2>Seznam seriálů - {{ genre.genrenamecz }}</h2>
    <div class="row">
        <!-- LEVÁ STRANA -->
        <div class="left-side">
            <!-- Seznam seriálů -->
            <div class="genre-list">
                {% for tvshow in tvshows %}
                    <div class="card">
                        <a href="/serial/{{ tvshow.url }}">
                            {% if tvshow.img == "noimg.png" %}
                                <img src="/static/img/movie/w400/nomovie.jpg" alt="{{ tvshow.titlecz }}" style="border-radius: .5rem .5rem 0 0;">
                                {% else %}
                                <img src="https://www.themoviedb.org/t/p/w400{{ tvshow.img }}" alt="{{ tvshow.titlecz }}" style="border-radius: .5rem .5rem 0 0;">
                            {% endif %}
                        </a>

                        <div class="card-body" style="border-radius: 0 0 .5rem .5rem !important;">
                            <!-- hodnocení -->
                            <div class="title-rating">
                                <div class="rating" data-rating="{{ tvshow.average_rating }}">
                                    <div class="rating-inner">
                                        {{ tvshow.average_rating }}%
                                    </div>
                                </div>
                            </div>
                            
                            <h5 class="card-title"><a href="/serial/{{ tvshow.url }}">{{ tvshow.titlecz }}</a></h5>
                            <p class="card-text">{{ tvshow.description|safe|truncatewords:40 }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Pravá strana -->
        <div class="right-side">
            <!-- ŽÁNRY -->
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title after-h3">Žánry</h3>
                    <div>
                        <a href="/serialy/akcni">Akční</a> |
                        <a href="/serialy/animovany">Animovaný</a> |
                        <a href="/serialy/dobrodruzny">Dobrodružný</a> |
                        <a href="/serialy/dokumentarni">Dokumentární</a> |
                        <a href="/serialy/drama">Drama</a> |
                        <a href="/serialy/fantasy">Fantasy</a> |
                        <a href="/serialy/historicky">Historický</a> |
                        <a href="/serialy/horor">Horor</a> |
                        <a href="/serialy/hudebni">Hudební</a> |
                        <a href="/serialy/komedie">Komedie</a> |
                        <a href="/serialy/krimi">Krimi</a> |
                        <a href="/serialy/mysteriozni">Mysteriózní</a> |
                        <a href="/serialy/rodinny">Rodinný</a> |
                        <a href="/serialy/romanticky">Romantický</a> |
                        <a href="/serialy/sci-fi">Sci-fi</a> |
                        <a href="/serialy/televizni-film">TV film</a> |
                        <a href="/serialy/thriller">Thriller</a> |
                        <a href="/serialy/valecny">Válečný</a> |
                        <a href="/serialy/western">Western</a>
                    </div>
                </div>
            </div>

            <!-- ROKY -->
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title after-h3">Roky</h3>
                    <div>
                        <a href="/serialy/2024">2024</a> |
                        <a href="/serialy/2023">2023</a> |
                        <a href="/serialy/2022">2022</a> |
                        <a href="/serialy/2021">2021</a> |
                        <a href="/serialy/2020">2020</a> |
                        <a href="/serialy/2019">2019</a> |
                        <a href="/serialy/2018">2018</a> |
                        <a href="/serialy/2017">2017</a> |
                        <a href="/serialy/2016">2016</a> |
                        <a href="/serialy/2015">2015</a> |
                        <a href="/serialy/2014">2014</a> |
                        <a href="/serialy/2013">2013</a> |
                        <a href="/serialy/2012">2012</a> |
                        <a href="/serialy/2011">2011</a> |
                        <a href="/serialy/2010">2010</a> |
                        <a href="/serialy/2009">2009</a> |
                        <a href="/serialy/2008">2008</a> |
                        <a href="/serialy/2007">2007</a> |
                        <a href="/serialy/2006">2006</a> |
                        <a href="/serialy/2005">2005</a> |
                        <a href="/serialy/2004">2004</a> |
                        <a href="/serialy/2003">2003</a> |
                        <a href="/serialy/2002">2002</a> |
                        <a href="/serialy/2001">2001</a> |
                        <a href="/serialy/2000">2000</a> |
                        <a href="/serialy/1999">1999</a>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

{% endblock %}